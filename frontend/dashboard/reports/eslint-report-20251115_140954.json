[{"filePath":"/workspace/frontend/dashboard/add-all-timeouts.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/fix-test-timeouts.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/inject-fake-timers.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/scripts/analyze-bundle.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/scripts/check-agents-cache.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/scripts/check-bundle-size.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/scripts/compare-bundle-size.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/scripts/convert-agents-to-json.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/scripts/copy-docs.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/scripts/generate-agents-metadata.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/scripts/generate-pwa-icons.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/scripts/watch-docs.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/validate-env-vars.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/vite-plugin-preload-hints.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/workspace/frontend/dashboard/vite.config.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'dbUiQuestDbProxy' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":89,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":89,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'n8nBasePath' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":94,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'res' is defined but never used. Allowed unused args must match /^_/u.","line":373,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":373,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { defineConfig, loadEnv } from 'vite';\nimport react from '@vitejs/plugin-react';\nimport { visualizer } from 'rollup-plugin-visualizer';\nimport viteCompression from 'vite-plugin-compression';\nimport { preloadHints } from './vite-plugin-preload-hints';\nimport { fileURLToPath } from 'url';\nimport path from 'path';\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nconst repoRoot = path.resolve(__dirname, '../../../');\nconst normalizeTarget = (value) => value.replace(/\\/+$/, '');\nconst normalizePath = (value) => {\n    if (!value || value === '/') {\n        return '';\n    }\n    return value.replace(/\\/+$/, '');\n};\nconst resolveProxy = (rawValue, fallbackTarget, fallbackPath = '') => {\n    const fallback = {\n        target: normalizeTarget(fallbackTarget),\n        basePath: normalizePath(fallbackPath),\n    };\n    if (!rawValue) {\n        return fallback;\n    }\n    try {\n        const parsed = new URL(rawValue, `${fallback.target}/`);\n        const target = normalizeTarget(`${parsed.protocol}//${parsed.hostname}${parsed.port ? `:${parsed.port}` : ''}`);\n        return {\n            target,\n            basePath: normalizePath(parsed.pathname),\n        };\n    }\n    catch {\n        return fallback;\n    }\n};\nconst createRewrite = (pattern, basePath) => {\n    const normalizedBase = normalizePath(basePath);\n    return (incomingPath) => {\n        const stripped = incomingPath.replace(pattern, '');\n        const ensured = stripped.startsWith('/') ? stripped : `/${stripped}`;\n        const remainder = ensured === '' ? '/' : ensured;\n        if (!normalizedBase) {\n            return remainder;\n        }\n        const basePrefix = normalizedBase.startsWith('/') ? normalizedBase : `/${normalizedBase}`;\n        if (remainder === '/' || remainder === '') {\n            return basePrefix || '/';\n        }\n        const composed = `${basePrefix}${remainder}`;\n        const sanitized = composed.replace(/\\/{2,}/g, '/');\n        return sanitized.length > 1 ? sanitized.replace(/\\/+$/, '') : sanitized;\n    };\n};\nexport default defineConfig(({ mode }) => {\n    const rootEnv = loadEnv(mode, repoRoot, '');\n    const appEnv = loadEnv(mode, __dirname, '');\n    const processEnv = Object.entries(process.env).reduce((acc, [key, value]) => {\n        if (typeof value === 'string' && value.length > 0) {\n            acc[key] = value;\n        }\n        return acc;\n    }, {});\n    const env = { ...rootEnv, ...appEnv, ...processEnv };\n    if (mode === 'development') {\n        console.log('[vite] VITE_GATEWAY_TOKEN=', env.VITE_GATEWAY_TOKEN);\n        console.log('[vite] TELEGRAM_GATEWAY_API_URL=', env.VITE_TELEGRAM_GATEWAY_API_URL);\n        console.log('[vite] TELEGRAM_GATEWAY_API_TOKEN=', env.VITE_TELEGRAM_GATEWAY_API_TOKEN);\n        console.log('[vite] API_SECRET_TOKEN=', env.VITE_API_SECRET_TOKEN);\n    }\n    const isProd = mode === 'production';\n    const dashboardPort = Number(env.VITE_DASHBOARD_PORT) || 9080;\n    const gatewayProxy = resolveProxy(env.GATEWAY_HTTP_URL || env.VITE_GATEWAY_HTTP_URL, 'http://localhost:9080');\n    const workspaceProxy = resolveProxy(env.WORKSPACE_PROXY_TARGET || env.VITE_WORKSPACE_PROXY_TARGET || env.VITE_WORKSPACE_API_URL, gatewayProxy.target || 'http://localhost:9080', '/api/workspace');\n    const libraryProxy = resolveProxy(env.WORKSPACE_LIBRARY_PROXY_TARGET ||\n        env.VITE_WORKSPACE_LIBRARY_PROXY_TARGET ||\n        env.VITE_WORKSPACE_LIBRARY_API_URL, workspaceProxy.target, '/api/library');\n    const tpCapitalProxy = resolveProxy(env.TP_CAPITAL_PROXY_TARGET || env.VITE_TP_CAPITAL_PROXY_TARGET || env.VITE_TP_CAPITAL_API_URL, 'http://localhost:4008');\n    // Docs API (FlexSearch + CRUD) runs on 3405; 3400 serves Docusaurus dev/NGINX\n    const docsApiProxy = resolveProxy(env.DOCS_API_PROXY_TARGET || env.VITE_DOCS_API_PROXY_TARGET || env.VITE_DOCS_API_URL, gatewayProxy.target, '/api/docs');\n    // RAG Collections Service (Directories API) runs on 3403\n    const ragCollectionsProxy = resolveProxy(env.VITE_RAG_COLLECTIONS_PROXY_TARGET || env.VITE_RAG_COLLECTIONS_API_URL, 'http://localhost:3403');\n    const serviceLauncherProxy = resolveProxy(env.VITE_SERVICE_LAUNCHER_PROXY_TARGET || env.VITE_SERVICE_LAUNCHER_API_URL, 'http://localhost:3500');\n    const docsProxy = resolveProxy(env.DOCUSAURUS_PROXY_TARGET || env.VITE_DOCUSAURUS_PROXY_TARGET || env.VITE_DOCUSAURUS_URL, 'http://localhost:3400');\n    const dbUiPgAdminProxy = resolveProxy(env.DB_UI_PGADMIN_PROXY_TARGET || env.VITE_DB_UI_PGADMIN_PROXY_TARGET, 'http://localhost:9080', '/db-ui/pgadmin');\n    const dbUiPgWebProxy = resolveProxy(env.DB_UI_PGWEB_PROXY_TARGET || env.VITE_DB_UI_PGWEB_PROXY_TARGET, 'http://localhost:9080', '/db-ui/pgweb');\n    const dbUiAdminerProxy = resolveProxy(env.DB_UI_ADMINER_PROXY_TARGET || env.VITE_DB_UI_ADMINER_PROXY_TARGET, 'http://localhost:9080', '/db-ui/adminer');\n    const dbUiQuestDbProxy = resolveProxy(env.DB_UI_QUESTDB_PROXY_TARGET || env.VITE_DB_UI_QUESTDB_PROXY_TARGET, 'http://localhost:9080', '/db-ui/questdb');\n    const firecrawlProxy = resolveProxy(env.VITE_FIRECRAWL_PROXY_TARGET || env.VITE_FIRECRAWL_PROXY_URL, 'http://localhost:9080/api/firecrawl');\n    const telegramGatewayProxy = resolveProxy(env.VITE_TELEGRAM_GATEWAY_PROXY_TARGET || env.VITE_TELEGRAM_GATEWAY_API_URL, 'http://localhost:14010', '/api/telegram-gateway');\n    const mcpProxy = resolveProxy(env.VITE_MCP_PROXY_TARGET, 'http://localhost:3847');\n    const n8nProxy = resolveProxy(env.N8N_PROXY_TARGET || env.VITE_N8N_PROXY_TARGET || env.VITE_N8N_URL, 'http://localhost:3680');\n    const n8nBasePath = (() => {\n        const configured = normalizePath(env.N8N_PATH || '/n8n');\n        if (!configured || configured === '/') {\n            return '/n8n';\n        }\n        return configured.startsWith('/') ? configured : `/${configured}`;\n    })();\n    const docsProxyConfig = {\n        target: docsProxy.target,\n        changeOrigin: true,\n        // Always strip the \"/docs\" prefix and apply optional basePath\n        rewrite: createRewrite(/^\\/docs/, docsProxy.basePath),\n    };\n    const resolveHeaderValue = (value) => Array.isArray(value) ? value[0] ?? '' : value ?? '';\n    const n8nBasicAuthHeader = (() => {\n        const n8nUser = env.N8N_BASIC_AUTH_USER || env.VITE_N8N_BASIC_AUTH_USER || 'automation';\n        const n8nPass = env.N8N_BASIC_AUTH_PASSWORD || env.VITE_N8N_BASIC_AUTH_PASSWORD || 'changeme';\n        if (!n8nUser || !n8nPass) {\n            return null;\n        }\n        return `Basic ${Buffer.from(`${n8nUser}:${n8nPass}`).toString('base64')}`;\n    })();\n    const attachN8nBasicAuth = (proxy) => {\n        if (!n8nBasicAuthHeader) {\n            return;\n        }\n        proxy.on('proxyReq', (proxyReq) => {\n            proxyReq.setHeader('Authorization', n8nBasicAuthHeader);\n        });\n    };\n    const stripFrameBlockingHeaders = (proxy) => {\n        proxy.on('proxyRes', (proxyRes) => {\n            delete proxyRes.headers['x-frame-options'];\n            const cspHeader = resolveHeaderValue(proxyRes.headers['content-security-policy']);\n            if (!cspHeader) {\n                return;\n            }\n            const sanitized = cspHeader\n                .split(';')\n                .map((directive) => directive.trim())\n                .filter((directive) => directive.length > 0 && !/frame-ancestors/i.test(directive))\n                .join('; ');\n            if (sanitized) {\n                proxyRes.headers['content-security-policy'] = sanitized;\n            }\n            else {\n                delete proxyRes.headers['content-security-policy'];\n            }\n        });\n    };\n    const preserveProxyLocation = (proxy, mountPath) => {\n        const normalizedMount = !mountPath || mountPath === '/'\n            ? ''\n            : mountPath.endsWith('/')\n                ? mountPath.slice(0, -1)\n                : mountPath;\n        proxy.on('proxyRes', (proxyRes) => {\n            const location = proxyRes.headers['location'];\n            if (!location || Array.isArray(location)) {\n                return;\n            }\n            if (/^[a-zA-Z][a-zA-Z0-9+\\-.]*:\\/\\//.test(location)) {\n                return;\n            }\n            const ensured = location.startsWith('/') ? location : `/${location}`;\n            proxyRes.headers['location'] =\n                normalizedMount ? `${normalizedMount}${ensured}`.replace(/\\/{2,}/g, '/') : ensured;\n        });\n    };\n    const n8nAssetsRewriteTarget = n8nProxy.basePath\n        ? `${n8nProxy.basePath}/assets`\n        : '/assets';\n    const n8nStaticRewriteTarget = n8nProxy.basePath\n        ? `${n8nProxy.basePath}/static`\n        : '/static';\n    const n8nFaviconRewriteTarget = n8nProxy.basePath\n        ? `${n8nProxy.basePath}/favicon.ico`\n        : '/favicon.ico';\n    return {\n        resolve: {\n            alias: {\n                '@': path.resolve(__dirname, './src'),\n            },\n        },\n        plugins: [\n            react(),\n            visualizer({\n                filename: './dist/stats.html',\n                open: false,\n                gzipSize: true,\n                brotliSize: true,\n                template: 'treemap', // or 'sunburst', 'network'\n            }),\n            // Preload critical chunks for faster initial load\n            preloadHints({\n                chunks: ['react-vendor', 'ui-radix', 'icons-vendor', 'utils-vendor'],\n                modulepreload: true,\n            }),\n            // Gzip compression\n            viteCompression({\n                verbose: true,\n                disable: !isProd,\n                threshold: 10240, // Only compress files > 10KB\n                algorithm: 'gzip',\n                ext: '.gz',\n            }),\n            // Brotli compression (better than gzip, ~15-20% smaller)\n            viteCompression({\n                verbose: true,\n                disable: !isProd,\n                threshold: 10240,\n                algorithm: 'brotliCompress',\n                ext: '.br',\n            }),\n            // PWA with Service Worker (Phase 2.3 - Browser Caching)\n            // Using manual implementation (vite-plugin-pwa incompatible with Vite 7)\n        ],\n        server: {\n            port: dashboardPort,\n            strictPort: true,\n            open: false,\n            host: '0.0.0.0',\n            fs: {\n                allow: [repoRoot],\n            },\n            proxy: {\n                // Docusaurus asset bundles (CSS/JS/Images/Fonts) - MUST come FIRST (more specific)\n                '^/assets/css/.*': {\n                    target: docsProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/assets\\/css/, docsProxy.basePath ? `${docsProxy.basePath}/assets/css` : '/assets/css'),\n                },\n                '^/assets/js/.*': {\n                    target: docsProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/assets\\/js/, docsProxy.basePath ? `${docsProxy.basePath}/assets/js` : '/assets/js'),\n                },\n                '^/assets/images/.*': {\n                    target: docsProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/assets\\/images/, docsProxy.basePath ? `${docsProxy.basePath}/assets/images` : '/assets/images'),\n                },\n                '^/assets/fonts/.*': {\n                    target: docsProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/assets\\/fonts/, docsProxy.basePath ? `${docsProxy.basePath}/assets/fonts` : '/assets/fonts'),\n                },\n                '^/img/.*': {\n                    target: docsProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/img/, docsProxy.basePath ? `${docsProxy.basePath}/img` : '/img'),\n                },\n                '/mcp': {\n                    target: mcpProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/mcp/, mcpProxy.basePath),\n                },\n                '/api/library': {\n                    target: libraryProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/api\\/library/, libraryProxy.basePath),\n                },\n                '/api/workspace': {\n                    target: workspaceProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/api\\/workspace/, workspaceProxy.basePath),\n                },\n                '/api/tp-capital': {\n                    target: tpCapitalProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/api\\/tp-capital/, tpCapitalProxy.basePath),\n                    configure: (proxy, _options) => {\n                        proxy.on('proxyReq', (proxyReq, req) => {\n                            // Forward X-API-Key header if present\n                            if (req.headers['x-api-key']) {\n                                proxyReq.setHeader('X-API-Key', req.headers['x-api-key']);\n                            }\n                        });\n                    },\n                },\n                '/api/docs': {\n                    target: docsApiProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/api\\/docs/, docsApiProxy.basePath),\n                },\n                '/api/launcher': {\n                    target: serviceLauncherProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/api\\/launcher/, serviceLauncherProxy.basePath),\n                },\n                // RAG Collections Service (port 3403) - Main collections API\n                '/api/v1/rag/collections': {\n                    target: ragCollectionsProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/api\\/v1\\/rag\\/collections/, ragCollectionsProxy.basePath ? `${ragCollectionsProxy.basePath}/api/v1/rag/collections` : '/api/v1/rag/collections'),\n                },\n                '/api/v1/rag/directories': {\n                    target: ragCollectionsProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/api\\/v1\\/rag\\/directories/, ragCollectionsProxy.basePath ? `${ragCollectionsProxy.basePath}/api/v1/rag/directories` : '/api/v1/rag/directories'),\n                },\n                '/api/v1/rag/models': {\n                    target: ragCollectionsProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/api\\/v1\\/rag\\/models/, ragCollectionsProxy.basePath ? `${ragCollectionsProxy.basePath}/api/v1/rag/models` : '/api/v1/rag/models'),\n                },\n                '/api/v1/rag/ingestion': {\n                    target: ragCollectionsProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/api\\/v1\\/rag\\/ingestion/, ragCollectionsProxy.basePath ? `${ragCollectionsProxy.basePath}/api/v1/rag/ingestion` : '/api/v1/rag/ingestion'),\n                },\n                // RAG Collections Service (port 3403) - fallback for other /api/v1/rag routes\n                '/api/v1/rag': {\n                    target: ragCollectionsProxy.target,\n                    changeOrigin: true,\n                    rewrite: (incomingPath) => {\n                        const stripped = incomingPath.replace(/^\\/api\\/v1\\/rag/, '');\n                        const remainder = stripped.startsWith('/') ? stripped : `/${stripped}`;\n                        if (!ragCollectionsProxy.basePath) {\n                            return `/api/v1/rag${remainder}`.replace(/\\/+/g, '/') || '/api/v1/rag';\n                        }\n                        const base = ragCollectionsProxy.basePath.startsWith('/')\n                            ? ragCollectionsProxy.basePath\n                            : `/${ragCollectionsProxy.basePath}`;\n                        return `${base}/api/v1/rag${remainder}`.replace(/\\/+/g, '/') || `${base}/api/v1/rag`;\n                    },\n                },\n                '/api/firecrawl': {\n                    target: firecrawlProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/api\\/firecrawl/, firecrawlProxy.basePath),\n                },\n                '/api/telegram-gateway': {\n                    target: telegramGatewayProxy.target,\n                    changeOrigin: true,\n                },\n                '/api/messages': {\n                    target: telegramGatewayProxy.target,\n                    changeOrigin: true,\n                },\n                '/api/channels': {\n                    target: telegramGatewayProxy.target,\n                    changeOrigin: true,\n                },\n                '/api/telegram-photo': {\n                    target: telegramGatewayProxy.target,\n                    changeOrigin: true,\n                    rewrite: (incomingPath) => {\n                        const stripped = incomingPath.replace(/^\\/api\\/telegram-photo/, '');\n                        const ensured = stripped.startsWith('/') ? stripped : `/${stripped}`;\n                        const basePrefix = telegramGatewayProxy.basePath\n                            ? telegramGatewayProxy.basePath.startsWith('/')\n                                ? telegramGatewayProxy.basePath\n                                : `/${telegramGatewayProxy.basePath}`\n                            : '';\n                        const composed = `${basePrefix}/photo${ensured}`.replace(/\\/{2,}/g, '/');\n                        return composed.length > 1 ? composed.replace(/\\/+$/, '') : composed;\n                    },\n                },\n                '/docs': docsProxyConfig,\n                '^/next/.*': docsProxyConfig,\n                // n8n API routes - must come before /n8n proxy\n                // These are absolute paths used by n8n HTML (e.g., /rest/sentry.js)\n                '^/rest/.*': {\n                    target: n8nProxy.target,\n                    changeOrigin: true,\n                    configure: (proxy, _options) => {\n                        attachN8nBasicAuth(proxy);\n                    },\n                },\n                // n8n assets - catch-all for /assets/* that aren't docs-specific\n                // This handles n8n's absolute asset paths (e.g., /assets/polyfills-*.js, /assets/index-*.js)\n                // Must come AFTER docs-specific paths (css/, js/, images/, fonts/) to avoid conflicts\n                // The regex matches any /assets/* path that doesn't start with docs-specific subdirectories\n                '^/assets/(?!css/|js/|images/|fonts/|branding/).*': {\n                    target: n8nProxy.target,\n                    changeOrigin: true,\n                    configure: (proxy, _options) => {\n                        attachN8nBasicAuth(proxy);\n                        proxy.on('error', (err, req, res) => {\n                            console.warn('[n8n assets proxy]', req.url, err.message);\n                        });\n                    },\n                },\n                // n8n favicon\n                '^/favicon.ico$': {\n                    target: n8nProxy.target,\n                    changeOrigin: true,\n                    configure: (proxy, _options) => {\n                        attachN8nBasicAuth(proxy);\n                    },\n                },\n                // n8n prefixed static assets introduced by N8N_PATH (e.g., /n8nassets/*, /n8nstatic/*)\n                '^/n8nassets': {\n                    target: n8nProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/n8nassets/, n8nAssetsRewriteTarget),\n                    configure: (proxy, _options) => {\n                        attachN8nBasicAuth(proxy);\n                        stripFrameBlockingHeaders(proxy);\n                        proxy.on('error', (err, req) => {\n                            console.warn('[n8n assets proxy]', req.url, err.message);\n                        });\n                    },\n                },\n                '^/n8nstatic': {\n                    target: n8nProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/n8nstatic/, n8nStaticRewriteTarget),\n                    configure: (proxy, _options) => {\n                        attachN8nBasicAuth(proxy);\n                        stripFrameBlockingHeaders(proxy);\n                        proxy.on('error', (err, req) => {\n                            console.warn('[n8n static proxy]', req.url, err.message);\n                        });\n                    },\n                },\n                '^/n8nfavicon.ico$': {\n                    target: n8nProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/n8nfavicon\\.ico$/, n8nFaviconRewriteTarget),\n                    configure: (proxy, _options) => {\n                        attachN8nBasicAuth(proxy);\n                        stripFrameBlockingHeaders(proxy);\n                    },\n                },\n                // n8n proxy - routes /n8n/* to n8n service (captures all paths including assets)\n                // Basic Auth disabled - using n8n native authentication with cookies for session persistence\n                // N8N_DISABLE_UI_SECURITY=true allows iframe embedding (removes X-Frame-Options)\n                '^/n8n': {\n                    target: n8nProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/n8n/, n8nProxy.basePath),\n                    cookieDomainRewrite: '', // Preserve cookies from n8n\n                    cookiePathRewrite: '/', // Keep cookies available for both /n8n and /rest routes\n                    configure: (proxy, _options) => {\n                        attachN8nBasicAuth(proxy);\n                        stripFrameBlockingHeaders(proxy);\n                    },\n                    ws: true, // Enable WebSocket support for n8n real-time features\n                },\n                // N8N static assets - must be proxied when embedded in iframe\n                // N8N uses absolute paths (/static/, /assets/) that need to be rewritten\n                '^/(static|assets)/': {\n                    target: n8nProxy.target,\n                    changeOrigin: true,\n                    rewrite: (path) => {\n                        // When N8N requests /static/file.js or /assets/file.js\n                        // Route to n8n-proxy with proper base path\n                        return path; // n8n-proxy serves these at root level\n                    },\n                    configure: (proxy, _options) => {\n                        attachN8nBasicAuth(proxy);\n                        stripFrameBlockingHeaders(proxy);\n                    },\n                },\n                // Database UI Tools - Proxy to avoid CORS and X-Frame-Options issues\n                '/db-ui/pgadmin': {\n                    target: dbUiPgAdminProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/db-ui\\/pgadmin/, dbUiPgAdminProxy.basePath),\n                    configure: (proxy, _options) => {\n                        stripFrameBlockingHeaders(proxy);\n                        preserveProxyLocation(proxy, '/db-ui/pgadmin');\n                    },\n                },\n                // pgAdmin core endpoints referenced with absolute paths inside the app\n                // (login flows, assets, misc APIs, etc.)\n                '/static/': {\n                    target: dbUiPgAdminProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/static/, path.posix.join(dbUiPgAdminProxy.basePath, '/static')),\n                    configure: (proxy, _options) => {\n                        stripFrameBlockingHeaders(proxy);\n                    },\n                },\n                '^/(authenticate|browser|misc|settings|user_management|preferences|sqleditor|tools)(/|$)': {\n                    target: dbUiPgAdminProxy.target,\n                    changeOrigin: true,\n                    configure: (proxy, _options) => {\n                        stripFrameBlockingHeaders(proxy);\n                        preserveProxyLocation(proxy, '/db-ui/pgadmin');\n                    },\n                },\n                '^/(api|favicon.ico)(/|$)': {\n                    target: dbUiPgAdminProxy.target,\n                    changeOrigin: true,\n                    configure: (proxy, _options) => {\n                        stripFrameBlockingHeaders(proxy);\n                        preserveProxyLocation(proxy, '/db-ui/pgadmin');\n                    },\n                },\n                '/db-ui/pgweb': {\n                    target: dbUiPgWebProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/db-ui\\/pgweb/, dbUiPgWebProxy.basePath),\n                    configure: (proxy, _options) => {\n                        stripFrameBlockingHeaders(proxy);\n                        preserveProxyLocation(proxy, '/db-ui/pgweb');\n                    },\n                },\n                '/db-ui/adminer': {\n                    target: dbUiAdminerProxy.target,\n                    changeOrigin: true,\n                    rewrite: createRewrite(/^\\/db-ui\\/adminer/, dbUiAdminerProxy.basePath),\n                    configure: (proxy, _options) => {\n                        stripFrameBlockingHeaders(proxy);\n                        preserveProxyLocation(proxy, '/db-ui/adminer');\n                    },\n                },\n                // QuestDB proxy is disabled due to connection timeout issues\n                // QuestDB returns 301 redirects with malformed responses that hang the Vite proxy\n                // Access QuestDB directly at: http://localhost:9002\n                // See: https://github.com/questdb/questdb/issues/...\n                // '/db-ui/questdb': {\n                //   target: dbUiQuestDbProxy.target,\n                //   changeOrigin: true,\n                //   rewrite: createRewrite(/^\\/db-ui\\/questdb/, dbUiQuestDbProxy.basePath),\n                //   configure: (proxy, _options) => {\n                //     stripFrameBlockingHeaders(proxy);\n                //     preserveProxyLocation(proxy, '/db-ui/questdb');\n                //   },\n                // },\n                // Note: /specs/ files are served directly from public/specs/ by Vite\n                // No proxy needed - files are static assets served from same origin\n                // This avoids CORS issues in API viewers (redoc, swagger, rapidoc)\n            },\n        },\n        define: {\n            // CRITICAL: All VITE_* variables used in code MUST be defined here for production builds\n            // Otherwise they will be undefined in production!\n            'import.meta.env.VITE_GATEWAY_TOKEN': JSON.stringify(env.VITE_GATEWAY_TOKEN || env.VITE_TELEGRAM_GATEWAY_API_TOKEN || env.TELEGRAM_GATEWAY_API_TOKEN || env.API_SECRET_TOKEN || ''),\n            'import.meta.env.VITE_TELEGRAM_GATEWAY_API_TOKEN': JSON.stringify(env.VITE_TELEGRAM_GATEWAY_API_TOKEN || env.TELEGRAM_GATEWAY_API_TOKEN || env.API_SECRET_TOKEN || ''),\n            'import.meta.env.VITE_TELEGRAM_GATEWAY_API_URL': JSON.stringify(env.VITE_TELEGRAM_GATEWAY_API_URL || env.VITE_API_BASE_URL || 'http://localhost:14010'),\n            'import.meta.env.VITE_API_SECRET_TOKEN': JSON.stringify(env.VITE_API_SECRET_TOKEN || env.API_SECRET_TOKEN || ''),\n        },\n        build: {\n            outDir: 'dist',\n            sourcemap: !isProd,\n            minify: 'terser',\n            terserOptions: {\n                compress: {\n                    drop_console: isProd,\n                    drop_debugger: true,\n                    pure_funcs: isProd ? ['console.log', 'console.info', 'console.debug'] : [],\n                    passes: 2, // Extra compression pass for better minification\n                },\n                mangle: {\n                    safari10: true, // Safari 10+ compatibility\n                },\n            },\n            rollupOptions: {\n                treeshake: {\n                    moduleSideEffects: 'no-external',\n                    propertyReadSideEffects: false,\n                    tryCatchDeoptimization: false,\n                },\n                output: {\n                    // Aggressive code splitting for better caching\n                    experimentalMinChunkSize: 10240, // 10KB minimum chunk size\n                    manualChunks(id) {\n                        // Vendor chunks - Core React (most stable)\n                        if (id.includes('node_modules/react/') ||\n                            id.includes('node_modules/react-dom/') ||\n                            id.includes('node_modules/react/jsx-runtime')) {\n                            return 'react-vendor';\n                        }\n                        // State management (Zustand + React Query)\n                        if (id.includes('node_modules/zustand') ||\n                            id.includes('node_modules/@tanstack/react-query')) {\n                            return 'state-vendor';\n                        }\n                        // Radix UI components (large, stable)\n                        if (id.includes('node_modules/@radix-ui/')) {\n                            return 'ui-radix';\n                        }\n                        // Drag and Drop (DnD Kit)\n                        if (id.includes('node_modules/@dnd-kit/')) {\n                            return 'dnd-vendor';\n                        }\n                        // Markdown (only loaded when needed - lazy loaded)\n                        if (id.includes('node_modules/react-markdown') ||\n                            id.includes('node_modules/remark-') ||\n                            id.includes('node_modules/rehype-')) {\n                            return 'markdown-vendor';\n                        }\n                        // Lucide icons (large icon library)\n                        if (id.includes('node_modules/lucide-react')) {\n                            return 'icons-vendor';\n                        }\n                        // Utilities (Axios, Clsx, etc)\n                        if (id.includes('node_modules/axios') ||\n                            id.includes('node_modules/clsx') ||\n                            id.includes('node_modules/tailwind-merge')) {\n                            return 'utils-vendor';\n                        }\n                        // Date utilities (date-fns ~20KB)\n                        if (id.includes('node_modules/date-fns')) {\n                            return 'date-vendor';\n                        }\n                        // Router (react-router-dom ~30KB - used everywhere)\n                        if (id.includes('node_modules/react-router-dom')) {\n                            return 'router-vendor';\n                        }\n                        // Diff utility (only used in specific pages)\n                        if (id.includes('node_modules/diff')) {\n                            return 'diff-vendor';\n                        }\n                        // Chart libraries (Recharts ~100KB)\n                        if (id.includes('node_modules/recharts') ||\n                            id.includes('node_modules/chart.js')) {\n                            return 'charts-vendor';\n                        }\n                        // Animation library (Framer Motion ~80KB)\n                        if (id.includes('node_modules/framer-motion')) {\n                            return 'animation-vendor';\n                        }\n                        // NOTE: Catalog views and data are NOT manually chunked\n                        // Let Vite create separate chunks naturally for better lazy loading:\n                        // - Component chunks: ~10-20KB each\n                        // - Metadata chunks: ~25KB (loaded with component)\n                        // - Full data chunks: ~350KB (loaded on-demand only)\n                        // Heavy pages (>50KB) - Split for better lazy loading\n                        if (id.includes('/pages/LlamaIndexPage')) {\n                            return 'page-llama';\n                        }\n                        if (id.includes('/pages/DocusaurusPage')) {\n                            return 'page-docusaurus';\n                        }\n                        if (id.includes('/pages/WorkspacePageNew')) {\n                            return 'page-workspace';\n                        }\n                        if (id.includes('/pages/TPCapitalOpcoesPage')) {\n                            return 'page-tpcapital';\n                        }\n                        // Other node_modules\n                        if (id.includes('node_modules/')) {\n                            return 'vendor';\n                        }\n                    },\n                    chunkFileNames: 'assets/[name]-[hash].js',\n                    entryFileNames: 'assets/[name]-[hash].js',\n                    assetFileNames: 'assets/[name]-[hash].[ext]',\n                },\n            },\n            // Bundle size budgets and warnings\n            chunkSizeWarningLimit: 400, // Stricter limit: 400KB (down from 500KB)\n            reportCompressedSize: true,\n            // Set target for modern browsers to enable more optimizations\n            target: 'es2020',\n            // Enable CSS code splitting\n            cssCodeSplit: true,\n        },\n        optimizeDeps: {\n            include: [\n                'react',\n                'react-dom',\n                'react/jsx-runtime',\n                'zustand',\n                '@tanstack/react-query',\n                'axios',\n            ],\n            exclude: ['lucide-react'],\n        },\n    };\n});\n","usedDeprecatedRules":[]}]