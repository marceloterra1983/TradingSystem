=============================================================================
TradingSystem Docker Compose - Port Map Visualization
=============================================================================
Generated: 2025-11-07
Legend: âœ… Active  âš ï¸ Conflict  ğŸ”´ Missing from docs  ğŸ”’ Internal only
=============================================================================

PORT RANGES (Host Ports)

3000-3999: Frontend & APIs
â”‚
â”œâ”€ 3000-3099: Frontend UI
â”‚  â”œâ”€ 3000 âš ï¸  Grafana (monitoring)
â”‚  â”œâ”€ 3000 âš ï¸  Firecrawl API (upstream)
â”‚  â”œâ”€ 3002 âœ…  Firecrawl API (alternate)
â”‚  â””â”€ 3003 âœ…  Playwright Service
â”‚
â”œâ”€ 3100-3199: Dashboard UI
â”‚  â”œâ”€ 3100 âœ…  Grafana (telegram-monitoring)
â”‚  â””â”€ 3103 âœ…  Dashboard (main frontend)
â”‚
â”œâ”€ 3200-3299: Integrations
â”‚  â””â”€ 3210 âœ…  Workspace API
â”‚
â”œâ”€ 3300-3399: Automation Apps
â”‚  â””â”€ 3310 âœ…  WAHA WhatsApp Gateway
â”‚
â”œâ”€ 3400-3499: Documentation
â”‚  â”œâ”€ 3400 ğŸ”´  Documentation Hub (NGINX)
â”‚  â”œâ”€ 3401 ğŸ”´  Documentation API (alternate)
â”‚  â”œâ”€ 3402 âœ…  RAG Service
â”‚  â”œâ”€ 3403 âœ…  RAG Collections Service
â”‚  â”œâ”€ 3404 âœ…  Documentation Hub (primary)
â”‚  â””â”€ 3405 âœ…  Documentation API (primary)
â”‚
â”œâ”€ 3500-3699: Automation Tools
â”‚  â”œâ”€ 3600 âœ…  Firecrawl Proxy
â”‚  â””â”€ 3601 âœ…  Course Crawler API
â”‚
â””â”€ 3900-3999: Launcher APIs
   â””â”€ 3909 âœ…  DB UI Launcher API

4000-4999: External Integrations & Databases
â”‚
â”œâ”€ 4000-4099: External Integrations
â”‚  â”œâ”€ 4007 âœ…  Telegram MTProto Gateway
â”‚  â”œâ”€ 4008 âœ…  TP Capital API
â”‚  â””â”€ 4010 âœ…  Telegram Gateway API
â”‚
â”œâ”€ 4200-4299: Application UIs
â”‚  â””â”€ 4201 âœ…  Course Crawler UI
â”‚
â””â”€ 5000-5499: Databases (NOT 7000 RANGE!)
   â”œâ”€ 5050 âœ…  pgAdmin
   â”œâ”€ 5432 ğŸ”’  PostgreSQL (internal only)
   â”œâ”€ 5433 ğŸ”´  TimescaleDB (workspace shared)
   â”œâ”€ 5434 âœ…  TimescaleDB (telegram)
   â”œâ”€ 5435 âœ…  Neon Compute
   â”œâ”€ 5436 âœ…  Firecrawl PostgreSQL
   â”œâ”€ 5438 âœ…  WAHA PostgreSQL
   â”œâ”€ 5440 âœ…  TimescaleDB (TP Capital)
   â”œâ”€ 5442 âœ…  n8n PostgreSQL
   â”œâ”€ 5450 âœ…  Workspace PostgreSQL
   â””â”€ 55433 âœ… Course Crawler PostgreSQL

5600-5699: Messaging
â”‚
â””â”€ 5672 âœ…  RabbitMQ AMQP

6000-6999: Cache, Queue, Connection Poolers
â”‚
â”œâ”€ 6300-6399: Cache & Vector DB
â”‚  â”œâ”€ 6333 âœ…  Qdrant Vector DB
â”‚  â”œâ”€ 6334 âœ…  Qdrant Node 2
â”‚  â”œâ”€ 6335 âœ…  Qdrant Node 1 P2P
â”‚  â”œâ”€ 6336 âœ…  Qdrant Node 2 P2P
â”‚  â”œâ”€ 6337 âœ…  Qdrant Node 3
â”‚  â”œâ”€ 6338 âœ…  Qdrant Node 3 P2P
â”‚  â”œâ”€ 6340 âœ…  Qdrant Load Balancer
â”‚  â”œâ”€ 6379 âš ï¸  Redis (general cache)
â”‚  â”œâ”€ 6379 âš ï¸  Redis (telegram master) - different network!
â”‚  â”œâ”€ 6379 âš ï¸  Redis (firecrawl) - different network!
â”‚  â”œâ”€ 6380 âœ…  Redis (RAG)
â”‚  â”œâ”€ 6381 âœ…  Redis (TP Capital master)
â”‚  â”œâ”€ 6382 âœ…  Redis (TP Capital replica)
â”‚  â”œâ”€ 6385 âœ…  Redis (telegram replica)
â”‚  â””â”€ 6390 âœ…  Redis (n8n)
â”‚
â””â”€ 6400-6499: Connection Poolers
   â”œâ”€ 6400 âœ…  Neon Pageserver
   â”œâ”€ 6432 âœ…  PgBouncer (general)
   â”œâ”€ 6434 âœ…  PgBouncer (telegram)
   â””â”€ 6435 âœ…  PgBouncer (TP Capital)

7000-7999: Reserved (Currently Unused)
â”‚
â””â”€ 7600-7699: Neon Storage
   â”œâ”€ 7676 âœ…  Neon Safekeeper
   â””â”€ 7677 âœ…  Neon Safekeeper HTTP

8000-8999: DevTools & Management
â”‚
â”œâ”€ 8000-8099: API Gateways
â”‚  â”œâ”€ 8000 âœ…  Kong Proxy HTTP
â”‚  â”œâ”€ 8001 âœ…  Kong Admin API
â”‚  â”œâ”€ 8081 âš ï¸  pgWeb
â”‚  â”œâ”€ 8081 âš ï¸  Redis Commander (CONFLICT!)
â”‚  â”œâ”€ 8082 âœ…  Adminer
â”‚  â””â”€ 8082 âœ…  Redis Commander (proposed)
â”‚
â”œâ”€ 8100-8199: Orchestration
â”‚  â”œâ”€ 8100 âœ…  Kestra HTTP
â”‚  â””â”€ 8101 âœ…  Kestra Management
â”‚
â”œâ”€ 8200-8299: LlamaIndex
â”‚  â”œâ”€ 8201 âœ…  LlamaIndex Ingestion
â”‚  â””â”€ 8202 âœ…  LlamaIndex Query
â”‚
â”œâ”€ 8400-8499: Stats & Monitoring
â”‚  â”œâ”€ 8404 âœ…  HAProxy Stats
â”‚  â”œâ”€ 8443 âœ…  Kong Proxy HTTPS
â”‚  â””â”€ 8444 âœ…  Kong Admin HTTPS
â”‚
â””â”€ 8800-8899: Protocol Bridges
   â””â”€ 8812 âœ…  QuestDB InfluxDB Port

9000-9999: Monitoring & Storage
â”‚
â”œâ”€ 9000-9099: Time-Series & Metrics
â”‚  â”œâ”€ 9000 ğŸ”´  QuestDB (internal)
â”‚  â”œâ”€ 9002 âœ…  QuestDB (HTTP)
â”‚  â””â”€ 9009 âœ…  QuestDB ILP
â”‚
â”œâ”€ 9090-9199: Prometheus & Exporters
â”‚  â”œâ”€ 9090 âš ï¸  Prometheus (main)
â”‚  â”œâ”€ 9090 âš ï¸  Prometheus (telegram) - same port!
â”‚  â”œâ”€ 9091 âœ…  Prometheus (telegram - proposed)
â”‚  â”œâ”€ 9093 âœ…  Alertmanager
â”‚  â”œâ”€ 9121 âœ…  Redis Exporter
â”‚  â””â”€ 9187 âœ…  PostgreSQL Exporter
â”‚
â””â”€ 9300-9399: Object Storage
   â”œâ”€ 9300 âœ…  MinIO API
   â””â”€ 9301 âœ…  MinIO Console

10000-11999: Reserved for Future Use

11000-11999: AI Services
â”‚
â””â”€ 11434 âœ… Ollama

12000-14999: Reserved for Future Use

15000-15999: Admin UIs
â”‚
â””â”€ 15672 âœ… RabbitMQ Management UI

16000-25999: Reserved for Future Use

26000-26999: High-Availability Services
â”‚
â””â”€ 26379 âœ… Redis Sentinel

=============================================================================
CONFLICTS SUMMARY
=============================================================================

âš ï¸  Port 3000: Grafana (monitoring) vs Firecrawl API (upstream)
    Resolution: Use GRAFANA_PORT=3000, Firecrawl uses alternate 3002

âš ï¸  Port 6379: Multiple Redis instances (5 services)
    Resolution: ACCEPTABLE - Different internal networks prevent collision
    - redis-cache (general)
    - telegram-redis-master (telegram_backend network)
    - firecrawl-redis (firecrawl_backend network)
    - Each isolated, no actual conflict

âš ï¸  Port 8081: pgWeb vs Redis Commander
    Resolution: Keep pgWeb at 8081, move Redis Commander to 8082

âš ï¸  Port 9090: Prometheus (main) vs Prometheus (telegram)
    Resolution: Main=9090, Telegram=9091 (via TELEGRAM_PROMETHEUS_PORT)

=============================================================================
MISSING FROM DOCUMENTATION
=============================================================================

ğŸ”´  Port 3400: Documentation Hub (primary NGINX server)
ğŸ”´  Port 3401: Documentation API (alternate port)
ğŸ”´  Port 5433: TimescaleDB (workspace shared database)
ğŸ”´  Port 9000: QuestDB (internal container port exposed)

Action: Update docs/content/tools/ports-services.mdx

=============================================================================
NETWORK ISOLATION (Why Redis "Conflicts" Are OK)
=============================================================================

Redis instances on port 6379 use DIFFERENT NETWORKS:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Host Machine (Port 6379 CAN'T bind multiple times)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… redis-cache         â†’ 6379:6379 (tradingsystem-network) â”‚
â”‚ âœ… telegram-redis      â†’ 6379:6379 (telegram_backend)      â”‚
â”‚ âœ… firecrawl-redis     â†’ 6379:6379 (firecrawl_backend)     â”‚
â”‚ âœ… rag-redis           â†’ 6380:6379 (tradingsystem_backend) â”‚
â”‚ âœ… tp-capital-redis    â†’ 6381:6379 (tp_capital_backend)    â”‚
â”‚ âœ… n8n-redis           â†’ 6390:6379 (n8n_backend)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KEY INSIGHT: They WOULD conflict if all tried to bind to host 6379,
but most services DON'T expose Redis externally! They use internal
Docker networks only.

EXTERNAL BINDINGS (actual host ports used):
- 6379 â†’ redis-cache (general)
- 6380 â†’ rag-redis
- 6381 â†’ tp-capital-redis-master
- 6382 â†’ tp-capital-redis-replica
- 6385 â†’ telegram-redis-replica
- 6390 â†’ n8n-redis

No actual conflict! âœ…

=============================================================================
RECOMMENDED VARIABLE NAMING CONVENTION
=============================================================================

Pattern: <SERVICE>_<COMPONENT>_PORT

Examples:
  WORKSPACE_API_PORT=3210
  TP_CAPITAL_API_PORT=4008
  TP_CAPITAL_DB_PORT=5440
  TP_CAPITAL_REDIS_MASTER_PORT=6381
  TP_CAPITAL_REDIS_REPLICA_PORT=6382
  TELEGRAM_API_PORT=4010
  TELEGRAM_MTPROTO_PORT=4007
  TELEGRAM_DB_PORT=5434
  DOCS_PORT=3404
  DOCS_API_PORT=3405

=============================================================================
END OF VISUALIZATION
=============================================================================
