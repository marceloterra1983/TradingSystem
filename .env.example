# ==============================================================================
# TradingSystem ‚Äì Minimal Environment Template
# ==============================================================================
# This file only keeps the secrets and per-installation tokens that cannot live
# in versioned defaults. All non-secret defaults stay in `config/.env.defaults`
# and host/port mappings are generated under `.env.shared` via `npm run ports:sync`.
#
# ‚úÖ Steps
# 1. cp .env.example .env
# 2. bash scripts/env/setup-env.sh        # auto-generates strong passwords
# 3. Fill every CHANGE_ME_* placeholder below
# 4. bash scripts/env/validate-env.sh     # ensures consistency
# 5. Keep `.env` untracked; commit only template updates
#
# Reference: governance/controls/ENVIRONMENT-VARIABLES-POLICY.md
# Detailed matrix: docs/content/tools/security-config/env.mdx
# ==============================================================================

# ------------------------------------------------------------------------------
# üîë Mandatory API Keys & Integrations
# ------------------------------------------------------------------------------
OPENAI_API_KEY="CHANGE_ME_OPENAI_API_KEY"
OPENAI_BASE_URL=https://api.openai.com/v1
LANGSMITH_API_KEY="CHANGE_ME_LANGSMITH_KEY"
LANGSMITH_PROJECT=tradingsystem-dev
LANGSMITH_TRACING=true
ANTHROPIC_API_KEY=""
FIRECRAWL_API_KEY=""
ANYTHINGLLM_API_KEY=""
ANYTHINGLLM_URL=http://localhost:3899
ANYTHINGLLM_WORKSPACE_SLUG=dash-dashboard
GITHUB_TOKEN=""
SLACK_WEBHOOK_URL=""
SENTRY_AUTH_TOKEN=""

# ------------------------------------------------------------------------------
# üì° Messaging & Telegram Stack
# ------------------------------------------------------------------------------
TELEGRAM_API_ID=
TELEGRAM_API_HASH=
TELEGRAM_PHONE_NUMBER=+5500000000000
TELEGRAM_SESSION=""
TELEGRAM_SESSION_ENCRYPTION_KEY="CHANGE_ME_SESSION_KEY"
TELEGRAM_BOT_TOKEN=""
TELEGRAM_INGESTION_BOT_TOKEN=""
TELEGRAM_FORWARDER_BOT_TOKEN=""
TELEGRAM_MODE=polling
TELEGRAM_SIGNALS_CHANNEL_ID=-1001234567890
TP_CAPITAL_SIGNALS_CHANNEL_ID=-1001234567890
TP_CAPITAL_GATEWAY_FILTER_TEXT_CONTAINS=
VITE_TELEGRAM_GATEWAY_API_URL=http://localhost:4010
VITE_TELEGRAM_GATEWAY_API_TOKEN="CHANGE_ME_GATEWAY_TOKEN"
TELEGRAM_GATEWAY_API_KEY="CHANGE_ME_TG_API_KEY"
TELEGRAM_GATEWAY_API_TOKEN="CHANGE_ME_TG_API_TOKEN"

# ------------------------------------------------------------------------------
# üì≤ WAHA ‚Äì WhatsApp HTTP API Stack
# ------------------------------------------------------------------------------
WAHA_IMAGE=devlikeapro/waha:latest-baileys
WAHA_PORT=3310
WAHA_HOST_BIND=127.0.0.1
WAHA_TZ=America/Sao_Paulo
WAHA_API_KEY="CHANGE_ME_WAHA_API_KEY"
WAHA_API_KEY_PLAIN="CHANGE_ME_WAHA_API_KEY"
WAHA_DASHBOARD_USERNAME=admin
WAHA_DASHBOARD_PASSWORD="CHANGE_ME_WAHA_DASHBOARD"
WAHA_DASHBOARD_ENABLED=true
WHATSAPP_SWAGGER_USERNAME=admin
WHATSAPP_SWAGGER_PASSWORD="CHANGE_ME_WAHA_SWAGGER"
WHATSAPP_SWAGGER_ENABLED=true
WAHA_DEFAULT_ENGINE=BAILEYS
WAHA_BASE_URL=http://localhost:3310
WAHA_PUBLIC_URL=http://localhost:3310
WAHA_HOSTNAME=0.0.0.0
WAHA_INTERNAL_PORT=3000
WAHA_MEDIA_STORAGE=S3
WAHA_PRINT_QR=false
WAHA_LOG_FORMAT=JSON
WAHA_LOG_LEVEL=info

WAHA_POSTGRES_HOST_BIND=127.0.0.1
WAHA_POSTGRES_PORT=5438
WAHA_POSTGRES_DB=waha
WAHA_POSTGRES_USER=waha
WAHA_POSTGRES_PASSWORD="CHANGE_ME_WAHA_DB_PASS"

WAHA_MINIO_HOST_BIND=127.0.0.1
WAHA_MINIO_API_PORT=9300
WAHA_MINIO_CONSOLE_HOST_BIND=127.0.0.1
WAHA_MINIO_CONSOLE_PORT=9301
WAHA_MINIO_BUCKET=waha-media
WAHA_MINIO_REGION=us-east-1
WAHA_MINIO_ROOT_USER=wahaadmin
WAHA_MINIO_ROOT_PASSWORD="CHANGE_ME_WAHA_MINIO"
WAHA_S3_PROXY_FILES=true

WAHA_WEBHOOK_HOST_BIND=127.0.0.1
WAHA_WEBHOOK_PORT=3908
WAHA_WEBHOOK_TOKEN="CHANGE_ME_WAHA_WEBHOOK_TOKEN"
WAHA_HOOK_URL=http://waha-webhook:3908/webhooks/waha
WAHA_HOOK_EVENTS=message,message.ack,session.status
WAHA_HOOK_CUSTOM_HEADERS=X-WAHA-TOKEN:${WAHA_WEBHOOK_TOKEN}

# ------------------------------------------------------------------------------
# üóÉÔ∏è Database UI Tools & Launcher API
# ------------------------------------------------------------------------------
PGADMIN_HOST_PORT=5050
PGADMIN_IMAGE_TAG=latest
PGWEB_HOST_PORT=8081
PGWEB_IMAGE_TAG=latest
PGWEB_DATABASE_URL=postgresql://postgres:postgres@host.docker.internal:5433/postgres?sslmode=disable
ADMINER_HOST_PORT=8082
ADMINER_IMAGE=adminer:latest

DB_TOOLS_API_PORT=3909
DB_TOOLS_API_TOKEN="CHANGE_ME_DB_TOOLS_TOKEN"
VITE_DB_TOOLS_API_URL=http://localhost:3909
VITE_DB_TOOLS_API_TOKEN=${DB_TOOLS_API_TOKEN}

# ------------------------------------------------------------------------------
# üîí Service-to-Service Secrets
# ------------------------------------------------------------------------------
GATEWAY_SECRET_TOKEN="CHANGE_ME_GATEWAY_SECRET"
API_SECRET_TOKEN="CHANGE_ME_SHARED_TOKEN"
INTER_SERVICE_SECRET="CHANGE_ME_INTER_SERVICE_SECRET"
VITE_GATEWAY_TOKEN="CHANGE_ME_DASHBOARD_GATEWAY_TOKEN"
TP_CAPITAL_API_KEY="CHANGE_ME_TP_CAPITAL_API_KEY"
VITE_TP_CAPITAL_API_KEY="CHANGE_ME_TP_CAPITAL_FRONTEND_KEY"

# ------------------------------------------------------------------------------
# üóÑÔ∏è Database, Cache & Queue Credentials
# ------------------------------------------------------------------------------
# These are automatically rotated by `scripts/env/setup-env.sh`. Run the script
# after copying the template so every value below is replaced by secure tokens.
TIMESCALE_POSTGRES_PASSWORD="CHANGE_ME_AUTO"
TIMESCALEDB_PASSWORD="CHANGE_ME_AUTO"
TP_CAPITAL_DB_PASSWORD="CHANGE_ME_AUTO"
TELEGRAM_GATEWAY_DB_PASSWORD="CHANGE_ME_AUTO"
TELEGRAM_DB_PASSWORD="CHANGE_ME_AUTO"
GATEWAY_DATABASE_PASSWORD="CHANGE_ME_AUTO"
APP_DOCUMENTATION_DB_PASSWORD="CHANGE_ME_AUTO"
FIRECRAWL_DB_PASSWORD="CHANGE_ME_AUTO"
FRONTEND_APPS_DB_READONLY_PASS="CHANGE_ME_AUTO"
WORKSPACE_DB_PASSWORD="CHANGE_ME_AUTO"
WORKSPACE_DATABASE_PASSWORD="CHANGE_ME_AUTO"
POSTGRES_PASSWORD="CHANGE_ME_AUTO"
REDIS_PASSWORD="CHANGE_ME_AUTO"
RABBITMQ_PASSWORD="CHANGE_ME_AUTO"
TELEGRAM_RABBITMQ_PASSWORD="CHANGE_ME_AUTO"
NEON_PASSWORD=""

# ------------------------------------------------------------------------------
# üõ†Ô∏è Optional Databases (Neon Workspace override)
# ------------------------------------------------------------------------------
# Only touch this block if LIBRARY_DB_STRATEGY=neon. Defaults cover local stacks.
NEON_HOST=localhost
NEON_PORT=5433
NEON_DATABASE=workspace
NEON_USER=postgres
NEON_SCHEMA=workspace
NEON_POOL_MAX=20
NEON_POOL_MIN=2
NEON_IDLE_TIMEOUT=30000
NEON_CONNECTION_TIMEOUT=5000
NEON_STATEMENT_TIMEOUT=30000
NEON_QUERY_TIMEOUT=30000
NEON_SSL=false

# ------------------------------------------------------------------------------
# üß≠ Admin Consoles & Observability
# ------------------------------------------------------------------------------
PGADMIN_DEFAULT_EMAIL=admin@tradingsystem.local
PGADMIN_DEFAULT_PASSWORD="CHANGE_ME_PGADMIN"
GF_SECURITY_ADMIN_PASSWORD="CHANGE_ME_GRAFANA"
KESTRA_DB_PASSWORD="CHANGE_ME_KESTRA_DB"
KESTRA_BASICAUTH_USERNAME=admin@tradingsystem.local
KESTRA_BASICAUTH_PASSWORD="CHANGE_ME_KESTRA_UI"
MCP_POSTGRES_URL=postgres://frontend_ro:CHANGE_ME_RO_PASS@localhost:5433/trading?sslmode=disable

# ------------------------------------------------------------------------------
# üåê Optional Firecrawl / External Integrations
# ------------------------------------------------------------------------------
# Note: Variables follow naming convention {SERVICE}__{SECTION}__{KEY}
# Reference: POL-0002 ¬ß3.3
FIRECRAWL__DATABASE__SUPABASE_URL=
FIRECRAWL__DATABASE__SUPABASE_SERVICE_TOKEN=
FIRECRAWL__DATABASE__SUPABASE_ANON_TOKEN=
FIRECRAWL__SEARCH__SERPER_API_KEY=
FIRECRAWL__SEARCH__SEARCHAPI_API_KEY=
FIRECRAWL__NOTIFICATIONS__SLACK_WEBHOOK_URL=
FIRECRAWL__ANALYTICS__POSTHOG_API_KEY=
FIRECRAWL__ANALYTICS__POSTHOG_HOST=https://app.posthog.com
FIRECRAWL__WEBHOOKS__SELF_HOSTED_URL=
FIRECRAWL__PROXY__SERVER=
FIRECRAWL__PROXY__USERNAME=
FIRECRAWL__PROXY__PASSWORD=
FIRECRAWL__TEST__API_KEY=

# ------------------------------------------------------------------------------
# ‚úÖ Validation helpers
# ------------------------------------------------------------------------------
# - bash scripts/env/validate-env.sh      # schema + required keys
# - bash scripts/env/print-env-summary.sh # quick diff between .env & defaults
# - npm run ports:sync                    # rebuilds .env.shared from registry
#
# Never commit `.env`; treat this template + governance policy as the source of
# truth for new variables. If you introduce a new secret:
# 1. Add the default (safe) value to config/.env.defaults
# 2. Document it in docs/content/tools/security-config/env.mdx
# 3. Append the placeholder here (if it cannot be versioned)
# 4. Update governance/controls/ENVIRONMENT-VARIABLES-POLICY.md
# ==============================================================================
