# ##############################################################################
# TRADINGSYSTEM – DEFAULT CONFIGURATION (.env.defaults)
#
# Este arquivo contém APENAS valores não-sensíveis (portas, URLs, flags).
# Secrets (API keys, passwords, tokens) devem estar em .env (não commitado).
#
# IMPORTANTE:
#   - Este arquivo É VERSIONADO (git add config/.env.defaults)
#   - NUNCA inclua secrets neste arquivo
#   - Para overrides locais, use .env.local (gitignored)
#
# Precedência de carregamento:
#   1. config/.env.defaults (este arquivo)
#   2. .env.local (overrides locais opcionais)
#   3. .env (secrets - maior prioridade)
###############################################################################

# 0-GATEWAY-STACK
GATEWAY_PUBLIC_URL=http://localhost:9082
#endregion 0-GATEWAY-STACK

# region 1-DASHBOARD-STACK
## Frontend (Vite)
VITE_APP_ENV=development
VITE_USE_UNIFIED_DOMAIN=false
# Phase 2: Centralized via GATEWAY_PUBLIC_URL
VITE_API_BASE_URL=${GATEWAY_PUBLIC_URL}/api
VITE_GATEWAY_HTTP_URL=${GATEWAY_PUBLIC_URL}
VITE_WORKSPACE_API_URL=/api/workspace
VITE_RAG_COLLECTIONS_URL=http://localhost:3403
VITE_QDRANT_URL=http://localhost:6333
VITE_TELEGRAM_GATEWAY_API_URL=${GATEWAY_PUBLIC_URL}/api/telegram-gateway
VITE_KESTRA_BASE_URL=http://localhost:8180
VITE_KESTRA_MANAGEMENT_URL=http://localhost:8685
VITE_N8N_URL=${GATEWAY_PUBLIC_URL}/n8n
VITE_N8N_USE_PROXY=true
VITE_N8N_BASIC_AUTH_USER=marcelo.terra@gmail.com
VITE_N8N_PATH=/home/workflows
VITE_PGADMIN_URL=http://localhost:5050
VITE_PGWEB_URL=http://localhost:5052
VITE_ADMINER_URL=http://localhost:3910
VITE_LAUNCHER_API_URL=http://localhost:3909
VITE_TP_CAPITAL_API_URL=/api/tp-capital
VITE_COURSE_CRAWLER_APP_URL=http://localhost:4201
VITE_COURSE_CRAWLER_GATEWAY_PATH=/apps/course-crawler
VITE_USE_DIRECT_COURSE_CRAWLER=false
DOCKER_CONTROL_PORT=9880
VITE_DOCKER_CONTROL_URL=http://127.0.0.1:${DOCKER_CONTROL_PORT}
VITE_EVOLUTION_MANAGER_URL=http://localhost:4203/manager
#endregion 1-DASHBOARD-STACK

# region 2-DOCS-STACKimage.png
VITE_DOCUSAURUS_URL=/docs
DOCS_PORT=3404
#endregion 2-DOCS-STACK

# region 4-1-TP-CAPITAL-STACK
TP_CAPITAL_DB_USER=tp_capital
TP_CAPITAL_DB_NAME=tp_capital_db
TP_CAPITAL_DB_PORT=5437
TP_CAPITAL_DB_HOST=tp-capital-pgbouncer
TP_CAPITAL_DB_STRATEGY=timescale
TP_CAPITAL_PGBOUNCER_PORT=6435
TP_CAPITAL_REDIS_PORT=6381
TP_CAPITAL_REDIS_REPLICA_PORT=6382
#endregion 4-1-TP-CAPITAL-STACK

# region 4-2-TELEGRAM-STACK
## Gateway HTTP e rede interna
TELEGRAM_GATEWAY_URL=http://telegram-gateway-api:4010
TELEGRAM_GATEWAY_PORT=4010
GATEWAY_PORT=4007
MTPROTO_SERVICE_URL=http://localhost:4007
GATEWAY_SERVICE_URL=http://localhost:4007
## Banco Timescale/PgBouncer
TELEGRAM_DB_USER=telegram
TELEGRAM_DB_PORT=7435
TELEGRAM_GATEWAY_DB_PORT=7435
TELEGRAM_GATEWAY_DB_HOST=localhost
TELEGRAM_GATEWAY_DB_NAME=telegram_gateway
TELEGRAM_GATEWAY_DB_USER=telegram
TELEGRAM_GATEWAY_DB_SCHEMA=telegram_gateway
TELEGRAM_GATEWAY_DB_TABLE=messages
TELEGRAM_GATEWAY_DB_URL=postgresql://telegram:${TELEGRAM_GATEWAY_DB_PASSWORD}@telegram-pgbouncer:6432/telegram_gateway
GATEWAY_DATABASE_HOST=${TELEGRAM_GATEWAY_DB_HOST}
GATEWAY_DATABASE_PORT=${TELEGRAM_GATEWAY_DB_PORT}
GATEWAY_DATABASE_NAME=${TELEGRAM_GATEWAY_DB_NAME}
GATEWAY_DATABASE_USER=${TELEGRAM_GATEWAY_DB_USER}
GATEWAY_DATABASE_SCHEMA=${TELEGRAM_GATEWAY_DB_SCHEMA}
GATEWAY_DATABASE_URL=${TELEGRAM_GATEWAY_DB_URL}
## RabbitMQ
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=telegram
RABBITMQ_VHOST=telegram
RABBITMQ_URL=amqp://telegram:${RABBITMQ_PASSWORD}@${RABBITMQ_HOST}:${RABBITMQ_PORT}/${RABBITMQ_VHOST}
## Redis / Sentinel
TELEGRAM_REDIS_PORT=6383
TELEGRAM_REDIS_REPLICA_PORT=6385
TELEGRAM_REDIS_MASTER_PORT=${TELEGRAM_REDIS_PORT}
TELEGRAM_REDIS_SENTINEL_PORT=26379
## Observabilidade
TELEGRAM_PROMETHEUS_PORT=9090
TELEGRAM_POSTGRES_EXPORTER_PORT=9187
## Flags de sincronização do gateway
TELEGRAM_GATEWAY_SYNC_ON_STARTUP=true
TELEGRAM_GATEWAY_STARTUP_SYNC_DELAY=5000
TELEGRAM_GATEWAY_STARTUP_SYNC_LIMIT=500
TELEGRAM_GATEWAY_STARTUP_SYNC_CONCURRENCY=3
#endregion 4-2-TELEGRAM-STACK

# region 4-3-WORKSPACE-STACK
LIBRARY_DB_STRATEGY=postgresql
NEON_HOST=workspace-db-compute
NEON_PORT=55432
NEON_DATABASE=workspace
NEON_USER=postgres
NEON_SCHEMA=workspace
NEON_DATABASE_URL=postgresql://postgres:neon_secure_pass@workspace-db-compute:55432/workspace
NEON_POOL_MAX=50
NEON_POOL_MIN=2
NEON_IDLE_TIMEOUT=30000
NEON_CONNECTION_TIMEOUT=5000
NEON_STATEMENT_TIMEOUT=30000
NEON_QUERY_TIMEOUT=30000
NEON_SSL=false
WORKSPACE_PORT=3200
WORKSPACE_EXTERNAL_PORT=3200
# Phase 2: Include GATEWAY_PUBLIC_URL in CORS
CORS_ORIGIN=${GATEWAY_PUBLIC_URL},http://localhost:3400,http://localhost:3401
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=120
LOG_LEVEL=info
METRICS_ENABLED=true
CORRELATION_ID_HEADER=x-correlation-id
POSTGRES_HOST=workspace-db
POSTGRES_PORT=5432
POSTGRES_DATABASE=workspace
POSTGRES_USER=postgres
POSTGRES_SCHEMA=workspace
POSTGRES_POOL_MAX=50
POSTGRES_POOL_MIN=2
#endregion 4-3-WORKSPACE-STACK

# region 4-4-RAG-STACK
## LLM & Embeddings
OLLAMA_MODEL=llama3.1
OLLAMA_EMBED_MODEL=nomic-embed-text
OLLAMA_EMBEDDING_MODEL=nomic-embed-text
OLLAMA_BASE_URL=http://localhost:11434
## Cache & Redis
CACHE_MEMORY_MAX=1000
CACHE_MEMORY_TTL=300000
CACHE_REDIS_TTL=600
EMBEDDING_CACHE_SIZE=10000
QUERY_CACHE_SIZE=5000
CONNECTION_POOL_SIZE=20
RAG_REDIS_PORT=6380
REDIS_URL=redis://rag-redis:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_REPLICA_PORT=6380
REDIS_ENABLED=true
REDIS_CACHE_TTL=600
## Serviços auxiliares
LLAMAINDEX_QUERY_URL=http://localhost:8202
LLAMAINDEX_INGESTION_URL=http://localhost:8201
QDRANT_URL=http://localhost:6333
COLLECTIONS_SERVICE_URL=http://localhost:3402
#endregion 4-4-RAG-STACK

# region 4-5-COURSE-CRAWLER-STACK
CCM_API_PORT=9180
CCM_FRONTEND_PORT=3304
CCM_PROMETHEUS_PORT=9390
COURSE_CRAWLER_MAX_CLASSES_PER_MODULE=50
COURSE_CRAWLER_APP_PORT=4201
COURSE_CRAWLER_TIMEOUT_MS=3600000
COURSE_CRAWLER_API_PORT=3601
COURSE_CRAWLER_DATABASE_URL=postgresql://postgres:coursecrawler@course-crawler-db:5432/coursecrawler
COURSE_CRAWLER_NEON_DATABASE_URL=postgresql://postgres:coursecrawler@course-crawler-db:5432/coursecrawler
COURSE_CRAWLER_OUTPUT_BASE=/home/marce/Projetos/TradingSystem/outputs/course-crawler
COURSE_CRAWLER_CLI_PATH=/home/marce/Projetos/TradingSystem/apps/course-crawler/dist/index.js
COURSE_CRAWLER_MAX_CONCURRENCY=1
VITE_COURSE_CRAWLER_API_URL=http://localhost:3601
VITE_COURSE_CRAWLER_APP_URL=http://localhost:4201
VITE_COURSE_CRAWLER_BASE_PATH=/apps/course-crawler
VITE_COURSE_CRAWLER_ADMIN_USERNAME=admin
VITE_COURSE_CRAWLER_ADMIN_PASSWORD=course-crawler-pass
VITE_COURSE_CRAWLER_GATEWAY_PATH=/apps/course-crawler
# Phase 2: Include GATEWAY_PUBLIC_URL in CORS
COURSE_CRAWLER_CORS_ORIGINS=${GATEWAY_PUBLIC_URL},http://localhost:4201
#endregion 4-5-COURSE-CRAWLER-STACK

# region 5-0-DATABASE-STACK
LAUNCHER_API_PORT=3909
LAUNCHER_API_TOKEN=devlocal-launcher-token
PGADMIN_PORT=5050
PGADMIN_DEFAULT_EMAIL=admin@example.com
PGADMIN_DEFAULT_PASSWORD=tradingsystem
PGADMIN_IMAGE_TAG=latest
ADMINER_PORT=3910
ADMINER_IMAGE_TAG=latest
PGWEB_PORT=5052
PGWEB_IMAGE_TAG=latest
QUESTDB_HTTP_PORT=9000
QUESTDB_ILP_PORT=9009
QUESTDB_PG_PORT=8812
QUESTDB_IMAGE_TAG=latest
#endregion 5-0-DATABASE-STACK

# region 5-1-N8N-STACK
N8N_IMAGE=n8nio/n8n:1.78.1
N8N_HOST_BIND=127.0.0.1
N8N_HOST=localhost
N8N_PROTOCOL=http
N8N_PORT=3680
N8N_INTERNAL_PORT=5678
N8N_PATH=/n8n
N8N_BASE_URL=http://localhost:9080/n8n
N8N_EDITOR_BASE_URL=http://localhost:9080/n8n
N8N_API_BASE_URL=http://localhost:9080/n8n/api
N8N_PROXY_TARGET=http://n8n-proxy:80/n8n
N8N_WEBHOOK_URL=http://localhost:9080/n8n/
WEBHOOK_URL=http://localhost:9080/n8n/
N8N_PROXY_HOPS=3
N8N_TZ=America/Sao_Paulo
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=marcelo.terra@gmail.com
N8N_USER_FOLDER=/home/node/.n8n
N8N_LOG_LEVEL=info
N8N_METRICS=true
N8N_METRICS_INCLUDE_IDENTIFIERS=false
N8N_DIAGNOSTICS_ENABLED=false
N8N_PERSONALIZATION_ENABLED=false
N8N_VERSION_NOTIFICATIONS_ENABLED=false
N8N_HIDE_USAGE_PAGE=true
N8N_SKIP_WEBHOOK_DEREGISTRATION_ON_SHUTDOWN=true
N8N_HIRING_BANNER_ENABLED=false
N8N_SECURE_COOKIE=false
N8N_SESSION_COOKIE_DOMAIN=localhost
N8N_SESSION_COOKIE_SAME_SITE=lax
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true
N8N_DISABLE_UI_SECURITY=true
N8N_SECURITY_ALLOW_EMBEDDING_IN_IFRAME=true
N8N_PREVIEW_MODE=true
N8N_QUEUE_HEALTH_CHECK_ACTIVE=true
N8N_EXECUTIONS_MODE=queue
N8N_RUNNERS_ENABLED=true
OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true
N8N_WORKER_CONCURRENCY=5
N8N_REDIS_DB=0
N8N_REDIS_TIMEOUT_THRESHOLD=30000
N8N_POSTGRES_IMAGE=postgres:16-alpine
N8N_POSTGRES_HOST_BIND=127.0.0.1
N8N_POSTGRES_PORT=5442
N8N_POSTGRES_DB=n8n
N8N_POSTGRES_USER=n8n
N8N_POSTGRES_MAX_CONNECTIONS=200
N8N_POSTGRES_SHARED_BUFFERS=256MB
N8N_REDIS_IMAGE=redis:7-alpine
N8N_REDIS_HOST_BIND=127.0.0.1
N8N_REDIS_PORT=6390
N8N_E2E_EMAIL=marcelo.terra@gmail.com
#endregion 5-1-N8N-STACK

# region 5-2-EVOLUTION-API-STACK
EVOLUTION_DB_NAME=evolution
EVOLUTION_DB_USER=evolution
EVOLUTION_DB_SCHEMA=evolution_api
EVOLUTION_DB_CLIENT_NAME=evolution-stack
EVOLUTION_DB_HOST=evolution-pgbouncer
EVOLUTION_DB_PORT=5437
EVOLUTION_DB_HOST_BIND=127.0.0.1
EVOLUTION_DB_POOL_PORT=6432
EVOLUTION_PGBOUNCER_PORT=6436
EVOLUTION_PGBOUNCER_HOST_BIND=127.0.0.1
EVOLUTION_REDIS_HOST_BIND=127.0.0.1
EVOLUTION_REDIS_PORT=6388
EVOLUTION_MINIO_ROOT_USER=evolution
EVOLUTION_MINIO_BUCKET=evolution-media
EVOLUTION_MINIO_REGION=us-east-1
EVOLUTION_MINIO_API_HOST_BIND=127.0.0.1
EVOLUTION_MINIO_API_PORT=9310
EVOLUTION_MINIO_CONSOLE_HOST_BIND=127.0.0.1
EVOLUTION_MINIO_CONSOLE_PORT=9311
EVOLUTION_S3_ENDPOINT=evolution-minio
EVOLUTION_S3_PORT=9000
EVOLUTION_S3_USE_SSL=false
EVOLUTION_CACHE_REDIS_PREFIX_KEY=evolution
EVOLUTION_CACHE_REDIS_URI=redis://evolution-redis:6379/6
EVOLUTION_API_HOST_BIND=127.0.0.1
EVOLUTION_API_PORT=4100
EVOLUTION_API_PUBLIC_URL=http://localhost:4100
EVOLUTION_SERVER_NAME=evolution
EVOLUTION_MANAGER_HOST_BIND=127.0.0.1
EVOLUTION_MANAGER_PORT=4203
EVOLUTION_MANAGER_API_BASE_URL=http://evolution-api:8080
EVOLUTION_NETWORK_SUBNET=172.35.0.0/24
EVOLUTION_METRICS_USER=prometheus
EVOLUTION_PROMETHEUS_METRICS=true
EVOLUTION_METRICS_AUTH_REQUIRED=false
EVOLUTION_AUTH_ENABLED=true
EVOLUTION_AUTH_TYPE=global
EVOLUTION_API_GLOBAL_KEY_NAME=global-key
EVOLUTION_AUTH_EXPOSE_LOGS=false
AUTHENTICATION_EXPOSE_IN_FETCH_INSTANCES=false
EVOLUTION_CORS_ORIGIN=*
EVOLUTION_CORS_METHODS=GET,POST,PUT,DELETE,PATCH
EVOLUTION_CORS_CREDENTIALS=true
#endregion 5-2-EVOLUTION-API-STACK

# region 5-3-WAHA-STACK
WAHA_IMAGE=devlikeapro/waha:noweb
WAHA_PORT=3310
WAHA_HOST_BIND=127.0.0.1
WAHA_TZ=America/Sao_Paulo
WAHA_API_KEY_PLAIN=ts_waha_api_IWkx12Sm0Je9rTdK6fan0CQD5A7ojuAPBdD3L9YLT04
WAHA_DASHBOARD_USERNAME=admin
WAHA_DASHBOARD_ENABLED=false
WHATSAPP_SWAGGER_USERNAME=admin
WHATSAPP_SWAGGER_ENABLED=true
WAHA_DEFAULT_ENGINE=NOWEB
WAHA_BASE_URL=http://localhost:3310
WAHA_PUBLIC_URL=http://localhost:3310
WAHA_HOSTNAME=0.0.0.0
WAHA_INTERNAL_PORT=3000
WAHA_MEDIA_STORAGE=S3
WAHA_PRINT_QR=false
WAHA_LOG_FORMAT=JSON
WAHA_LOG_LEVEL=info
WAHA_S3_PROXY_FILES=true
WAHA_NO_API_KEY=true
WAHA_POSTGRES_HOST_BIND=127.0.0.1
WAHA_POSTGRES_PORT=5438
WAHA_POSTGRES_DB=waha
WAHA_POSTGRES_USER=waha
WAHA_MINIO_HOST_BIND=127.0.0.1
WAHA_MINIO_API_PORT=9300
WAHA_MINIO_CONSOLE_HOST_BIND=127.0.0.1
WAHA_MINIO_CONSOLE_PORT=9301
WAHA_MINIO_BUCKET=waha-media
WAHA_MINIO_REGION=us-east-1
WAHA_MINIO_ROOT_USER=wahaadmin
WAHA_APPS_ENABLED=false
WAHA_WEBHOOK_HOST_BIND=127.0.0.1
WAHA_WEBHOOK_PORT=3908
WAHA_HOOK_URL=http://waha-webhook:3908/webhooks/waha
WAHA_HOOK_EVENTS=message,message.ack,session.status
WAHA_HOOK_CUSTOM_HEADERS="X-WAHA-TOKEN:webhooktoken"
#endregion 5-3-WAHA-STACK

# region 5-5-KESTRA-STACK
# (Sem defaults adicionais além dos endpoints expostos ao dashboard.)
#endregion 5-5-KESTRA-STACK

# region 5-7-FIRECRAWL-STACK
# (Sem defaults versionados no momento.)
#endregion 5-7-FIRECRAWL-STACK

# region 6-1-MONITORING-STACK
## Launcher / DB Tools API
LAUNCHER_API_PORT=3909
LAUNCHER_API_LOG_LEVEL=info
## Ferramentas de Administração de Banco
PGADMIN_DEFAULT_EMAIL=marcelo.terra@gmail.com
PGADMIN_PORT=5050
PGWEB_PORT=8081
PGADMIN_HOST_PORT=5050
PGWEB_HOST_PORT=8081
ADMINER_HOST_PORT=8082
## Bancos compartilhados e portas padrão
TIMESCALEDB_HOST=localhost
TIMESCALEDB_PORT=7000
TIMESCALEDB_USER=timescale
TIMESCALEDB_DATABASE=APPS-TPCAPITAL
TIMESCALEDB_BACKUP_PORT=7001
POSTGRES_LANGGRAPH_PORT=7002
KONG_DB_PORT=7003
TIMESCALEDB_EXPORTER_PORT=7200
QUESTDB_ILP_PORT=7011
QUESTDB_INFLUX_PORT=7012
#endregion 6-1-MONITORING-STACK
