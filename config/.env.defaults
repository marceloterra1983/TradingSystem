# ##############################################################################
# TRADINGSYSTEM – DEFAULT CONFIGURATION (.env.defaults)
#
# Este arquivo contém APENAS valores não-sensíveis (portas, URLs, flags).
# Secrets (API keys, passwords, tokens) devem estar em .env (não commitado).
#
# IMPORTANTE:
#   - Este arquivo É VERSIONADO (git add config/.env.defaults)
#   - NUNCA inclua secrets neste arquivo
#   - Para overrides locais, use .env.local (gitignored)
#
# Precedência de carregamento:
#   1. config/.env.defaults (este arquivo)
#   2. .env.local (overrides locais opcionais)
#   3. .env (secrets - maior prioridade)
###############################################################################

# 0-GATEWAY-STACK
# (Sem defaults versionados; segredos residem em `.env`).

# =============================================================================
# 1-DASHBOARD-STACK
# =============================================================================
## Frontend (Vite)
VITE_APP_ENV=development
VITE_USE_UNIFIED_DOMAIN=false
VITE_API_BASE_URL=http://localhost:3401
VITE_WORKSPACE_API_URL=/api/workspace
VITE_RAG_COLLECTIONS_URL=http://localhost:3403
VITE_QDRANT_URL=http://localhost:6333
VITE_TELEGRAM_GATEWAY_API_URL=http://localhost:4010
VITE_KESTRA_BASE_URL=http://localhost:8180
VITE_KESTRA_MANAGEMENT_URL=http://localhost:8685
VITE_N8N_URL=http://localhost:3680/n8n
VITE_N8N_USE_PROXY=true
VITE_N8N_BASIC_AUTH_USER=marcelo.terra@gmail.com
VITE_N8N_PATH=/home/workflows
VITE_PGADMIN_URL=http://localhost:9080/db-ui/pgadmin
VITE_PGWEB_URL=http://localhost:9080/db-ui/pgweb
VITE_ADMINER_URL=http://localhost:9080/db-ui/adminer
VITE_LAUNCHER_API_URL=http://localhost:3909
VITE_TP_CAPITAL_API_URL=/api/tp-capital
VITE_COURSE_CRAWLER_APP_URL=http://localhost:4201
VITE_DOCKER_CONTROL_URL=http://127.0.0.1:9876

# =============================================================================
# 2-DOCS-STACK
# =============================================================================
VITE_DOCUSAURUS_URL=/docs
DOCS_PORT=3404

# =============================================================================
# 4-1-TP-CAPITAL-STACK
# =============================================================================
TP_CAPITAL_DB_USER=tp_capital
TP_CAPITAL_DB_NAME=tp_capital_db
TP_CAPITAL_DB_PORT=5437
TP_CAPITAL_DB_HOST=tp-capital-pgbouncer
TP_CAPITAL_DB_STRATEGY=timescale
TP_CAPITAL_PGBOUNCER_PORT=6435
TP_CAPITAL_REDIS_PORT=6381
TP_CAPITAL_REDIS_REPLICA_PORT=6382

# =============================================================================
# 4-2-TELEGRAM-STACK
# =============================================================================
## Gateway HTTP e rede interna
TELEGRAM_GATEWAY_URL=http://telegram-gateway-api:4010
TELEGRAM_GATEWAY_PORT=4010
GATEWAY_PORT=4007
MTPROTO_SERVICE_URL=http://localhost:4007
GATEWAY_SERVICE_URL=http://localhost:4007
## Banco Timescale/PgBouncer
TELEGRAM_DB_USER=telegram
TELEGRAM_DB_PORT=7435
TELEGRAM_GATEWAY_DB_PORT=7435
TELEGRAM_GATEWAY_DB_HOST=localhost
TELEGRAM_GATEWAY_DB_NAME=telegram_gateway
TELEGRAM_GATEWAY_DB_USER=telegram
TELEGRAM_GATEWAY_DB_SCHEMA=telegram_gateway
TELEGRAM_GATEWAY_DB_TABLE=messages
TELEGRAM_GATEWAY_DB_URL=postgresql://telegram:${TELEGRAM_GATEWAY_DB_PASSWORD}@telegram-pgbouncer:6432/telegram_gateway
GATEWAY_DATABASE_HOST=${TELEGRAM_GATEWAY_DB_HOST}
GATEWAY_DATABASE_PORT=${TELEGRAM_GATEWAY_DB_PORT}
GATEWAY_DATABASE_NAME=${TELEGRAM_GATEWAY_DB_NAME}
GATEWAY_DATABASE_USER=${TELEGRAM_GATEWAY_DB_USER}
GATEWAY_DATABASE_SCHEMA=${TELEGRAM_GATEWAY_DB_SCHEMA}
GATEWAY_DATABASE_URL=${TELEGRAM_GATEWAY_DB_URL}
## RabbitMQ
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=telegram
RABBITMQ_VHOST=telegram
RABBITMQ_URL=amqp://telegram:${RABBITMQ_PASSWORD}@${RABBITMQ_HOST}:${RABBITMQ_PORT}/${RABBITMQ_VHOST}
## Redis / Sentinel
TELEGRAM_REDIS_PORT=6383
TELEGRAM_REDIS_REPLICA_PORT=6385
TELEGRAM_REDIS_MASTER_PORT=${TELEGRAM_REDIS_PORT}
TELEGRAM_REDIS_SENTINEL_PORT=26379
## Observabilidade
TELEGRAM_PROMETHEUS_PORT=9090
TELEGRAM_POSTGRES_EXPORTER_PORT=9187
## Flags de sincronização do gateway
TELEGRAM_GATEWAY_SYNC_ON_STARTUP=true
TELEGRAM_GATEWAY_STARTUP_SYNC_DELAY=5000
TELEGRAM_GATEWAY_STARTUP_SYNC_LIMIT=500
TELEGRAM_GATEWAY_STARTUP_SYNC_CONCURRENCY=3

# =============================================================================
# 4-3-WORKSPACE-STACK
# =============================================================================
LIBRARY_DB_STRATEGY=postgresql
NEON_HOST=workspace-db-compute
NEON_PORT=55432
NEON_DATABASE=workspace
NEON_USER=postgres
NEON_SCHEMA=workspace
NEON_DATABASE_URL=postgresql://postgres:neon_secure_pass@workspace-db-compute:55432/workspace
NEON_POOL_MAX=50
NEON_POOL_MIN=2
NEON_IDLE_TIMEOUT=30000
NEON_CONNECTION_TIMEOUT=5000
NEON_STATEMENT_TIMEOUT=30000
NEON_QUERY_TIMEOUT=30000
NEON_SSL=false
WORKSPACE_PORT=3200
WORKSPACE_EXTERNAL_PORT=3200
CORS_ORIGIN=http://localhost:3103,http://localhost:3400,http://localhost:3401
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=120
LOG_LEVEL=info
METRICS_ENABLED=true
CORRELATION_ID_HEADER=x-correlation-id
POSTGRES_HOST=workspace-db
POSTGRES_PORT=5432
POSTGRES_DATABASE=workspace
POSTGRES_USER=postgres
POSTGRES_SCHEMA=workspace
POSTGRES_POOL_MAX=50
POSTGRES_POOL_MIN=2

# =============================================================================
# 4-4-RAG-STACK
# =============================================================================
## LLM & Embeddings
OLLAMA_MODEL=llama3.1
OLLAMA_EMBED_MODEL=nomic-embed-text
OLLAMA_EMBEDDING_MODEL=nomic-embed-text
OLLAMA_BASE_URL=http://localhost:11434
## Cache & Redis
CACHE_MEMORY_MAX=1000
CACHE_MEMORY_TTL=300000
CACHE_REDIS_TTL=600
EMBEDDING_CACHE_SIZE=10000
QUERY_CACHE_SIZE=5000
CONNECTION_POOL_SIZE=20
RAG_REDIS_PORT=6380
REDIS_URL=redis://rag-redis:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_REPLICA_PORT=6380
REDIS_ENABLED=true
REDIS_CACHE_TTL=600
## Serviços auxiliares
LLAMAINDEX_QUERY_URL=http://localhost:8202
LLAMAINDEX_INGESTION_URL=http://localhost:8201
QDRANT_URL=http://localhost:6333
COLLECTIONS_SERVICE_URL=http://localhost:3402

# =============================================================================
# 4-5-COURSE-CRAWLER-STACK
# =============================================================================
CCM_API_PORT=9180
CCM_FRONTEND_PORT=3304
CCM_PROMETHEUS_PORT=9390
COURSE_CRAWLER_MAX_CLASSES_PER_MODULE=50
COURSE_CRAWLER_APP_PORT=4201
COURSE_CRAWLER_TIMEOUT_MS=3600000
COURSE_CRAWLER_API_PORT=3601
COURSE_CRAWLER_DATABASE_URL=postgresql://postgres:coursecrawler@course-crawler-db:5432/coursecrawler
COURSE_CRAWLER_NEON_DATABASE_URL=postgresql://postgres:coursecrawler@course-crawler-db:5432/coursecrawler
COURSE_CRAWLER_OUTPUT_BASE=/home/marce/Projetos/TradingSystem/outputs/course-crawler
COURSE_CRAWLER_CLI_PATH=/home/marce/Projetos/TradingSystem/apps/course-crawler/dist/index.js
COURSE_CRAWLER_MAX_CONCURRENCY=1
COURSE_CRAWLER_CORS_ORIGINS=http://localhost:3103,http://localhost:4201

# =============================================================================
# 5-1-N8N-STACK
# =============================================================================
N8N_IMAGE=n8nio/n8n:1.78.1
N8N_HOST_BIND=127.0.0.1
N8N_HOST=localhost
N8N_PROTOCOL=http
N8N_PORT=3680
N8N_INTERNAL_PORT=5678
N8N_PATH=/n8n
N8N_BASE_URL=http://localhost:3103/n8n
N8N_EDITOR_BASE_URL=http://localhost:3103/n8n
N8N_API_BASE_URL=http://localhost:3103/n8n/api
N8N_PROXY_TARGET=http://localhost:3680
N8N_WEBHOOK_URL=http://localhost:3103/n8n/
WEBHOOK_URL=http://localhost:3103/n8n/
N8N_TZ=America/Sao_Paulo
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=marcelo.terra@gmail.com
N8N_USER_FOLDER=/home/node/.n8n
N8N_LOG_LEVEL=info
N8N_METRICS=true
N8N_METRICS_INCLUDE_IDENTIFIERS=false
N8N_DIAGNOSTICS_ENABLED=false
N8N_PERSONALIZATION_ENABLED=false
N8N_VERSION_NOTIFICATIONS_ENABLED=false
N8N_HIDE_USAGE_PAGE=true
N8N_SKIP_WEBHOOK_DEREGISTRATION_ON_SHUTDOWN=true
N8N_HIRING_BANNER_ENABLED=false
N8N_SECURE_COOKIE=false
N8N_SESSION_COOKIE_DOMAIN=localhost
N8N_SESSION_COOKIE_SAME_SITE=lax
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true
N8N_DISABLE_UI_SECURITY=true
N8N_SECURITY_ALLOW_EMBEDDING_IN_IFRAME=true
N8N_PREVIEW_MODE=true
N8N_QUEUE_HEALTH_CHECK_ACTIVE=true
N8N_EXECUTIONS_MODE=queue
N8N_RUNNERS_ENABLED=true
OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true
N8N_WORKER_CONCURRENCY=5
N8N_REDIS_DB=0
N8N_REDIS_TIMEOUT_THRESHOLD=30000
N8N_POSTGRES_IMAGE=postgres:16-alpine
N8N_POSTGRES_HOST_BIND=127.0.0.1
N8N_POSTGRES_PORT=5442
N8N_POSTGRES_DB=n8n
N8N_POSTGRES_USER=n8n
N8N_POSTGRES_MAX_CONNECTIONS=200
N8N_POSTGRES_SHARED_BUFFERS=256MB
N8N_REDIS_IMAGE=redis:7-alpine
N8N_REDIS_HOST_BIND=127.0.0.1
N8N_REDIS_PORT=6390
N8N_E2E_EMAIL=marcelo.terra@gmail.com

# =============================================================================
# 5-2-EVOLUTION-API-STACK
# =============================================================================
# (Reservado para futuros serviços da Evolution API.)

# =============================================================================
# 5-3-WAHA-STACK (WhatsApp)
# =============================================================================
WAHA_IMAGE=devlikeapro/waha:noweb
WAHA_PORT=3310
WAHA_HOST_BIND=127.0.0.1
WAHA_TZ=America/Sao_Paulo
WAHA_API_KEY_PLAIN=ts_waha_api_IWkx12Sm0Je9rTdK6fan0CQD5A7ojuAPBdD3L9YLT04
WAHA_DASHBOARD_USERNAME=admin
WAHA_DASHBOARD_ENABLED=true
WHATSAPP_SWAGGER_USERNAME=admin
WHATSAPP_SWAGGER_ENABLED=true
WAHA_DEFAULT_ENGINE=NOWEB
WAHA_BASE_URL=http://localhost:3310
WAHA_PUBLIC_URL=http://localhost:3310
WAHA_HOSTNAME=0.0.0.0
WAHA_INTERNAL_PORT=3000
WAHA_MEDIA_STORAGE=S3
WAHA_PRINT_QR=false
WAHA_LOG_FORMAT=JSON
WAHA_LOG_LEVEL=info
WAHA_S3_PROXY_FILES=true
WAHA_POSTGRES_HOST_BIND=127.0.0.1
WAHA_POSTGRES_PORT=5438
WAHA_POSTGRES_DB=waha
WAHA_POSTGRES_USER=waha
WAHA_MINIO_HOST_BIND=127.0.0.1
WAHA_MINIO_API_PORT=9300
WAHA_MINIO_CONSOLE_HOST_BIND=127.0.0.1
WAHA_MINIO_CONSOLE_PORT=9301
WAHA_MINIO_BUCKET=waha-media
WAHA_MINIO_REGION=us-east-1
WAHA_MINIO_ROOT_USER=wahaadmin
WAHA_APPS_ENABLED=false
WAHA_WEBHOOK_HOST_BIND=127.0.0.1
WAHA_WEBHOOK_PORT=3908
WAHA_HOOK_URL=http://waha-webhook:3908/webhooks/waha
WAHA_HOOK_EVENTS=message,message.ack,session.status
WAHA_HOOK_CUSTOM_HEADERS="X-WAHA-TOKEN:webhooktoken"

# =============================================================================
# 5-5-KESTRA-STACK (Workflow Orchestration)
# =============================================================================
# (Sem defaults adicionais além dos endpoints expostos ao dashboard.)

# =============================================================================
# 5-7-FIRECRAWL-STACK
# =============================================================================
# (Sem defaults versionados no momento.)

# =============================================================================
# 6-1-MONITORING-STACK
# =============================================================================
## Launcher / DB Tools API
LAUNCHER_API_PORT=3909
LAUNCHER_API_LOG_LEVEL=info
## Ferramentas de Administração de Banco
PGADMIN_DEFAULT_EMAIL=marcelo.terra@gmail.com
PGADMIN_PORT=5050
PGWEB_PORT=8081
PGADMIN_HOST_PORT=5050
PGWEB_HOST_PORT=8081
ADMINER_HOST_PORT=8082
## Bancos compartilhados e portas padrão
TIMESCALEDB_HOST=localhost
TIMESCALEDB_PORT=7000
TIMESCALEDB_USER=timescale
TIMESCALEDB_DATABASE=APPS-TPCAPITAL
TIMESCALEDB_BACKUP_PORT=7001
POSTGRES_LANGGRAPH_PORT=7002
KONG_DB_PORT=7003
TIMESCALEDB_EXPORTER_PORT=7200
QUESTDB_ILP_PORT=7011
QUESTDB_INFLUX_PORT=7012
