@startuml WebScraperArchitecture
title WebScraper Architecture Overview

skinparam componentStyle rectangle
skinparam shadowing false

package "Frontend" {
  [WebScraper App\nReact (Port 3800)] as webapp
  [Dashboard\nReact (Port 3103)] as dashboard
}

package "Backend APIs" {
  [WebScraper API\nExpress + Prisma (Port 3700)] as api
  [Firecrawl Proxy\nExpress (Port 3600)] as proxy
}

package "Core Services" {
  [Firecrawl Service\nNode.js (Port 3002)] as firecrawl
  database "TimescaleDB\nPostgreSQL (Port 5433)" as timescaledb
  database "Redis\nQueue" as redis
}

package "Observability" {
  [Prometheus\nPort 9090] as prometheus
  [Grafana\nPort 3000] as grafana
}

webapp -down-> api : HTTP REST\nJobs • Templates • Statistics
dashboard -down-> api : HTTP REST\nAdmin panels
api --> timescaledb : Prisma ORM\nPersist jobs/templates
api ..> proxy : HTTP /api/v1\nRerun scrape/crawl
proxy --> firecrawl : HTTP /v1\nScrape & Crawl
firecrawl --> redis : Queue tasks\nStatus updates

prometheus ..> api : Scrape /metrics
prometheus ..> proxy : Scrape /metrics
grafana ..> prometheus : Query dashboards

@enduml
