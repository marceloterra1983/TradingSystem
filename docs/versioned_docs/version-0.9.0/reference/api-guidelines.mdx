---
title: API Design Guidelines
description: Standards for designing and evolving TradingSystem REST APIs.
tags:
  - reference
  - api
owner: BackendGuild
lastReviewed: '2025-10-26'
---
## Overview

These guidelines define the conventions that every TradingSystem REST API must follow. Adhering to a consistent contract across services simplifies integrations, accelerates development, and keeps Redocusaurus documentation accurate.

## Design Principles

- **Resource First**: Model endpoints around domain resources (`/orders`, `/positions`) rather than RPC verbs.
- **Predictable URLs**: Use kebab-case for resource names and nested routes for sub-resources (`/orders/{orderId}/fills`).
- **HTTP Semantics**: Align verbs with intent — `GET` (read), `POST` (create/action), `PUT` (replace), `PATCH` (partial update), `DELETE` (remove).
- **Idempotency**: Require `Idempotency-Key` headers for POST commands that mutate state to guard against retries.
- **Versioning**: Embed the version in the path (`/api/v1/...`). Introduce `/v2` only for breaking changes with parallel support.

## Request & Response Shape

- **JSON Everywhere**: Requests and responses are JSON encoded with camelCase fields.
- **Pagination**: Use `limit` (default 50) and `offset` parameters. Responses return `data`, `total`, `limit`, `offset`.
- **Timestamps**: Always ISO 8601 in UTC (e.g., `2025-10-26T12:34:56.000Z`).
- **Enums**: Represented as uppercase strings (`"status": "PENDING"`). Document allowed values in OpenAPI schemas.
- **Nullable Fields**: Explicitly include `null` when a value is unknown or optional (no omission-based signalling).

## Error Handling

- **HTTP Codes**:
  - `400` – Validation failure (include field-level errors).
  - `401` – Authentication required or token invalid.
  - `403` – Authenticated but action forbidden (e.g., risk policy).
  - `404` – Resource not found.
  - `409` – Conflict (duplicate idempotency key, race conditions).
  - `422` – Domain-specific validation errors (e.g., invalid symbol).
  - `500` – Unexpected server error (log correlation id).
- **Error Envelope**:

  ```json
  {
    "error": {
      "code": "RISK_LIMIT_EXCEEDED",
      "message": "Daily loss limit exceeded: 5250 / 5000",
      "details": [
        { "field": "dailyLossLimit", "message": "Exceeded configured limit" }
      ],
      "traceId": "trace-abc123"
    }
  }
  ```

- **Traceability**: Include `traceId` in every error for correlating logs and metrics.

## Documentation Requirements

- **OpenAPI**: Every API must update `docs/static/specs/<service>.openapi.yaml`.
- **Examples**: Provide request/response samples for the top workflows (create, list, update).
- **Changelog**: Record breaking changes in `docs/content/sdd/api/<service>/v1/changelog`.
- **Redocusaurus**: Register the spec in `docusaurus.config.js` so interactive docs stay in sync.

## Governance Checklist

- [ ] Endpoint names use resource nouns.
- [ ] Query parameters documented with defaults.
- [ ] Error codes enumerated with actionable messages.
- [ ] Authentication and rate limiting requirements documented.
- [ ] Tests cover happy path, validation, and error scenarios.

## Related Documentation

- [API Catalog](../api/overview)
- [Order Manager API Spec](../sdd/api/order-manager/v1/spec)
- [Testing Strategy](./testing-strategy)
