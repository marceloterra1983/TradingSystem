---
title: Ports Page
sidebar_position: 6
description: P√°gina de monitoramento em tempo real de todas as portas dos servi√ßos do TradingSystem
tags:
  - ports
  - monitoring
  - service-launcher
  - dashboard
owner: DocsOps
lastReviewed: '2025-11-03'
---

# Ports Page

P√°gina de monitoramento em tempo real de todas as portas dos servi√ßos do TradingSystem.

## üìã Vis√£o Geral

A **Ports Page** fornece uma visualiza√ß√£o completa e em tempo real de todos os servi√ßos do TradingSystem, organizados por porta. A p√°gina consulta o Service Launcher a cada 5 segundos para garantir informa√ß√µes atualizadas sobre o status de cada servi√ßo.

## üéØ Funcionalidades

### Overview Cards

- **Total Services**: N√∫mero total de servi√ßos configurados
- **Healthy Services**: Servi√ßos respondendo corretamente (com % de uptime)
- **Unhealthy Services**: Servi√ßos que n√£o est√£o respondendo
- **Query Time**: Tempo de resposta da consulta ao backend

### Estat√≠sticas por Categoria

Visualiza√ß√£o do status dos servi√ßos agrupados por categoria:

- **API**: Servi√ßos de API REST (Workspace, TP Capital, Documentation API, etc.)
- **UI**: Interfaces de usu√°rio (Dashboard, Documentation Hub)
- **Docs**: Servi√ßos de documenta√ß√£o
- **Monitoring**: Ferramentas de monitoramento (Prometheus, Grafana)
- **Data**: Bancos de dados e storage (QuestDB, TimescaleDB)
- **Messaging**: Servi√ßos de mensageria (Telegram Gateway)
- **Internal**: Servi√ßos internos (Service Launcher)

Cada categoria exibe:
- N√∫mero de servi√ßos saud√°veis vs. total
- Barra de progresso com c√≥digo de cores
- Percentual de sa√∫de

### Lista Completa de Servi√ßos

Cada servi√ßo exibe:

- **Nome e Descri√ß√£o**: Identifica√ß√£o clara do servi√ßo
- **Categoria**: Badge colorido indicando a categoria
- **Status**: Badge verde (Healthy) ou vermelho (Unhealthy)
- **Porta**: N√∫mero da porta em destaque
- **Response Time**: Tempo de resposta em ms
- **Last Checked**: Quando foi verificado pela √∫ltima vez
- **Links R√°pidos**: 
  - Open Service (abre o servi√ßo em nova aba)
  - Health Endpoint (abre o endpoint de sa√∫de)

## üîÑ Atualiza√ß√£o Autom√°tica

A p√°gina implementa **polling autom√°tico** a cada 5 segundos usando `refetchInterval` do TanStack Query:

```typescript
const { data } = useQuery<PortsResponse>({
  queryKey: ['ports'],
  queryFn: fetchPorts,
  refetchInterval: 5000, // Refetch every 5 seconds
  staleTime: 3000,
});
```

Indicador visual de auto-refresh no canto superior direito da p√°gina.

## üõ†Ô∏è Implementa√ß√£o T√©cnica

### Backend - Service Launcher

**Endpoint**: `GET /api/ports`

**Localiza√ß√£o**: `apps/status/server.js`

**Resposta**:

```json
{
  "success": true,
  "timestamp": "2025-11-03T14:45:00.000Z",
  "durationMs": 150,
  "stats": {
    "total": 12,
    "healthy": 10,
    "unhealthy": 2,
    "byCategory": {
      "api": {"total": 5, "healthy": 4, "unhealthy": 1},
      "ui": {"total": 2, "healthy": 2, "unhealthy": 0},
      ...
    }
  },
  "ports": [
    {
      "port": 3103,
      "service": {
        "id": "dashboard-ui",
        "name": "Dashboard",
        "description": "Frontend dashboard (Vite/React)",
        "category": "ui"
      },
      "status": "healthy",
      "health": {
        "isHealthy": true,
        "responseTimeMs": 45,
        "lastChecked": "2025-11-03T14:45:00.000Z"
      },
      "urls": {
        "health": "http://localhost:3103/health",
        "base": "http://localhost:3103"
      }
    },
    ...
  ]
}
```

### Frontend - Dashboard

**Componente**: `PortsPage.tsx`

**Localiza√ß√£o**: `frontend/dashboard/src/components/pages/PortsPage.tsx`

**Tecnologias**:
- React + TypeScript
- TanStack Query (data fetching e polling)
- Lucide React (√≠cones)
- Tailwind CSS (estiliza√ß√£o)
- shadcn/ui (Card components)

**Features**:
- Loading state com spinner
- Error state com retry button
- Empty state com instru√ß√µes
- Responsive design (mobile, tablet, desktop)
- Dark mode support (via ThemeContext)
- C√≥digo de cores por status e categoria

## üìç Navega√ß√£o

A p√°gina est√° dispon√≠vel na se√ß√£o **Toolbox** do sidebar:

```
Toolbox
  ‚îú‚îÄ LangGraph
  ‚îú‚îÄ RAG Services
  ‚îú‚îÄ AnythingLLM
  ‚îú‚îÄ Kestra
  ‚îú‚îÄ Agno Agents
  ‚îú‚îÄ Status
  ‚îî‚îÄ Ports  ‚Üê Nova p√°gina
```

**URL**: `http://localhost:3103/#/ports`

## üß™ Como Testar

### 1. Verificar Endpoint Backend

```bash
# Testar endpoint diretamente
curl http://localhost:3500/api/ports | jq '.'

# Ou usar o script de teste
bash scripts/test-ports-endpoint.sh
```

### 2. Acessar P√°gina no Dashboard

```bash
# Garantir que o dashboard est√° rodando
cd frontend/dashboard
npm run dev

# Abrir no navegador
open http://localhost:3103/#/ports
```

### 3. Verificar Auto-Refresh

1. Abrir a p√°gina Ports
2. Parar um servi√ßo (ex: `docker stop workspace`)
3. Aguardar 5 segundos
4. Verificar se o status do servi√ßo mudou para "Unhealthy"
5. Reiniciar o servi√ßo (`docker start workspace`)
6. Verificar se o status volta para "Healthy"

## üé® Esquema de Cores

### Status
- **Healthy**: Verde (`bg-green-500/20 text-green-400`)
- **Unhealthy**: Vermelho (`bg-red-500/20 text-red-400`)

### Categorias
- **API**: Azul (`text-blue-400`)
- **UI**: Roxo (`text-purple-400`)
- **Docs**: Indigo (`text-indigo-400`)
- **Monitoring**: Laranja (`text-orange-400`)
- **Data**: Verde (`text-green-400`)
- **Messaging**: Rosa (`text-pink-400`)
- **Internal**: Cinza (`text-gray-400`)

### Health Percentage
- **100%**: Verde (`bg-green-500`)
- **‚â•50%**: Amarelo (`bg-yellow-500`)
- **<50%**: Vermelho (`bg-red-500`)

## üîß Manuten√ß√£o

### Adicionar Nova Categoria

Edite as fun√ß√µes de cores em `PortsPage.tsx`:

```typescript
function getCategoryColor(category: string): string {
  const colors: Record<string, string> = {
    // ... cores existentes
    'nova-categoria': 'text-cyan-400',
  };
  return colors[category] || 'text-gray-400';
}

function getCategoryBadgeColor(category: string): string {
  const colors: Record<string, string> = {
    // ... cores existentes
    'nova-categoria': 'bg-cyan-500/20 text-cyan-400 border-cyan-500/30',
  };
  return colors[category] || 'bg-gray-500/20 text-gray-400 border-gray-500/30';
}
```

### Modificar Intervalo de Polling

Edite o `refetchInterval` na query:

```typescript
const { data } = useQuery<PortsResponse>({
  queryKey: ['ports'],
  queryFn: fetchPorts,
  refetchInterval: 10000, // 10 segundos ao inv√©s de 5
  staleTime: 8000,
});
```

### Adicionar Novo Servi√ßo ao Monitoramento

Os servi√ßos s√£o automaticamente detectados a partir da configura√ß√£o do Service Launcher em `apps/status/server.js`:

```javascript
const SERVICE_TARGETS = [
  createServiceTarget({
    id: 'novo-servico',
    name: 'Novo Servi√ßo',
    description: 'Descri√ß√£o do novo servi√ßo',
    category: 'api', // ou outra categoria
    defaultPort: 3700,
    portEnv: 'SERVICE_LAUNCHER_NOVO_SERVICO_PORT',
    urlEnv: 'SERVICE_LAUNCHER_NOVO_SERVICO_URL',
  }),
  // ... outros servi√ßos
];
```

## üìä M√©tricas e Observabilidade

A p√°gina fornece m√©tricas em tempo real:

- **Total de servi√ßos**: Quantos servi√ßos est√£o configurados
- **Taxa de disponibilidade**: % de servi√ßos saud√°veis
- **Tempo de resposta**: Performance das verifica√ß√µes de health
- **Distribui√ß√£o por categoria**: Vis√£o organizacional dos servi√ßos

Essas m√©tricas s√£o √∫teis para:
- Identificar rapidamente problemas de infraestrutura
- Monitorar a sa√∫de geral do sistema
- Detectar padr√µes de falha por categoria
- Otimizar configura√ß√µes de portas e servi√ßos

## üîó Links Relacionados

- [Service Launcher Overview](./overview.mdx)
- [Service Launcher Configuration](./config.mdx)
- [Health Check System](../../tools/monitoring/health-checks.mdx)
- [Service Port Map](../../tools/ports-services/port-map.mdx)

---

**Criado em**: 2025-11-03  
**√öltima atualiza√ß√£o**: 2025-11-03  
**Mantido por**: DocsOps Team

