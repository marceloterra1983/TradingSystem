---
title: Architecture
description: Architecture diagrams and component responsibilities for the Workspace
  application.
tags:
  - apps
  - workspace
  - architecture
owner: DocsOps
lastReviewed: '2025-10-26'
---
## Page Composition

- `WorkspacePageNew.tsx` lives under `frontend/apps/workspace/src/components/workspace`.
- Page rendered through `CustomizablePageLayout` with `defaultColumns={1}` (vertical stack).
- Two primary sections, each wrapped in a `CollapsibleCard`:
  1. **`WorkspaceListSection`** – CRUD table with filters and action buttons.
  2. **`StatusBoardSection`** – Kanban board powered by `@dnd-kit`.
- Header toolbar hosts the global "+" button that launches `AddItemDialog`.

## Section Responsibilities

### WorkspaceListSection

- Displays tabular data with seven columns (title, category, status, priority, tags, created date, actions).
- Renders filter controls for category, status, priority, and tags.
- Uses `TanStack Table` helpers for sorting and responsive layouts.
- Actions column surfaces dialogs: `ViewItemDrawer`, `EditItemDialog`, `DeleteItemDialog`.
- Sync banner indicates when backend API is unavailable.

### StatusBoardSection

- Implements drag-and-drop using `DndContext`, `SortableContext`, and custom sensors.
- Columns map to workflow statuses (`new`, `review`, `in-progress`, `completed`, `rejected`).
- Card components reuse shared badge tokens for priority and category color coding.
- Drop handler dispatches `updateItem` action in store and triggers API mutation.

### Modal + Dialog Layer

- `AddItemDialog` and `EditItemDialog` share form schema (`WorkspaceItemFormSchema`).
- Validation managed through `react-hook-form` + `zod`.
- Submissions route through store actions to keep optimistic updates consistent.

## State and Data Layer

- `useWorkspaceStore` (Zustand) is the single source of truth for items, filters, loading state, and `lastSyncedAt`.
- TanStack Query handles server state fetches (`useWorkspaceItemsQuery`) as well as background refetching.
- Store actions (`loadItems`, `createItem`, `updateItem`, `deleteItem`, `reorderItem`) wrap Axios calls under `workspaceApi`.
- API target: Express backend at `http://localhost:3200/api/items` (proxied as `/api/workspace/items` in Vite).
- Responses update both the list data set and Kanban columns to avoid desync.

## Data Flow

1. User triggers mutation (dialog submit, drag drop, delete action).
2. Component calls corresponding store action.
3. Store invokes API client; optimistic update applied immediately.
4. On success, store reconciles server response and updates `lastSyncedAt`.
5. On failure, store rolls back optimistic change and raises toast error message.

### Read Path

- Initial load executed via `useEffect` in page component, populating store.
- Filters produce derived selectors inside store to power both sections.
- Query invalidation occurs on create/update/delete actions.

## Integration Points

- **Backend Service**: `backend/api/workspace` Express app backed by TimescaleDB (`frontend_apps.workspace` schema).
- **Proxy**: `vite.config.ts` rewrites `/api/workspace` to backend, enabling identical URLs in standalone and dashboard modes.
- **Dashboard Embed**: `dashboard/src/components/pages/workspace-embed/WorkspaceIframe.tsx` loads the standalone build, sharing authentication context and theme.
- **Shared Tokens**: Category and priority colors imported from `frontend/tokens`.

## Deployment Topology

- Vite dev server runs on port 3900 with hot module reload.
- Production build emits static assets served by CDN or the main dashboard host.
- Backend API continues to listen on port 3200 regardless of frontend deployment target.
- Dashboard references the deployed URL (e.g., `https://workspace.tradingsystem.local`) inside iframe configuration.

## Observability Considerations

- Toast notifications and toast store surface success/failure messages.
- Sync banner persists until API health recovers.
- Telemetry hooks (future) can be enabled via `VITE_ENABLE_ANALYTICS` flag without altering architecture.
