---
title: Port Range Policy
description: Conjunto oficial de faixas de portas reservado para cada dom√≠nio do TradingSystem.
tags:
  - governance
  - networking
owner: Platform Architecture
lastUpdated: '2025-11-05'
---

> **Status:** Ativo ‚Äì Reflete `config/ports/registry.yaml` v1.0.  
> **Fonte:** [port-governance-2025-11-05](../../../tools/openspec/changes/port-governance-2025-11-05/README.md)

## üéØ Objetivo

Eliminar conflitos de portas definindo faixas exclusivas por dom√≠nio (frontend, APIs, integra√ß√µes externas, dados, etc.) com pelo menos 20% de folga para crescimento futuro.

## üìä Faixas Oficiais

| Stack / Dom√≠nio            | Range      | Uso Atual | Folga Aproximada |
|---------------------------|------------|-----------|------------------|
| `frontend-ui`             | 3000-3099  | 3         | 97%              |
| `dashboard-ui`            | 3100-3199  | 1         | 90%              |
| `integrations`            | 3200-3299  | 0         | 100%             |
| `documentation`           | 3400-3499  | 2         | 98%              |
| `automation`              | 3500-3699  | 2         | 94%              |
| `external-integrations`   | 4000-4099  | 2         | 98%              |
| `db-core`                 | 5000-5499  | 4         | 92%              |
| `messaging`               | 5600-5699  | 1         | 99%              |
| `cache`                   | 6300-6399  | 4         | 96%              |
| `pgbouncer`               | 6400-6499  | 1         | 99%              |
| `sentinel`                | 26000-26999| 1         | 99%              |
| `devtools`                | 8000-8299  | 3         | 97%              |
| `automation-platforms`    | 8180-8899  | 2         | 98%              |
| `monitoring`              | 9000-9299  | 4         | 96%              |
| `admin-ui-high`           | 15000-15999| 1         | 99%              |

üìÅ Fonte viva: `config/ports/registry.yaml` (`ranges`).

## üß≠ Diretrizes

1. **Obrigat√≥rio** registrar novos servi√ßos no `registry.yaml` antes de abrir PR.
2. **Sem sobreposi√ß√£o:** cada faixa √© exclusiva; exce√ß√µes precisam de ADR.
3. **Reserva de 20%:** altera√ß√µes que reduzam a folga devem incluir plano de expans√£o.
4. **Documenta√ß√£o autom√°tica:** executar `npm run ports:sync` para propagar ranges para `.env.shared`, dashboards e health scripts.

## ‚úÖ Processos

- **Revis√£o:** Architecture + DevOps validam novas portas durante code review.
- **Automa√ß√£o:** GitHub Action `port-governance.yml` barra PRs com portas fora da faixa.
- **Invent√°rio:** `reports/ports/port-inventory.xlsx` √© atualizado junto ao registry.

## üìå Pr√≥ximos Passos

- Monitorar ocupa√ß√£o trimestralmente (relat√≥rio em `reports/ports/`).
- Avaliar necessidade de novas faixas (ex.: gRPC, WebRTC) ap√≥s migra√ß√µes.
