---
title: "Event \u2013 Order Created"
description: Definition and payload contract for the `order.created` event.
tags:
  - sdd
  - events
owner: ArchitectureGuild
lastReviewed: '2025-10-26'
---
## Overview

The `order.created` event is emitted when a new order is successfully created and passes initial risk validation. This event signals that an order is ready for submission to the broker.

**Event Name**: `order.created`  
**Version**: v1  
**Status**: Specification (implementation pending)  
**Trigger**: Order creation via `POST /api/orders` with successful risk validation

## Payload

### Event Schema

```typescript
interface OrderCreatedEvent {
  eventId: string;            // Unique event identifier (UUID)
  eventType: 'order.created'; // Event type constant
  timestamp: string;          // Event timestamp (ISO 8601)
  version: 'v1';              // Event schema version
  payload: OrderCreatedPayload;
  metadata: EventMetadata;
}

interface OrderCreatedPayload {
  orderId: string;
  symbol: string;
  side: 'BUY' | 'SELL';
  type: 'MARKET' | 'LIMIT' | 'STOP' | 'STOP_LIMIT';
  quantity: number;
  price?: number;
  stopPrice?: number;
  timeInForce: 'DAY' | 'GTC' | 'IOC' | 'FOK';
  status: 'PENDING';
  createdAt: string;
  riskChecks: RiskCheckResult;
}

interface RiskCheckResult {
  tradingHours: 'passed' | 'failed';
  killSwitch: 'passed' | 'failed';
  dailyLossLimit: 'passed' | 'failed';
  positionSizeLimit: 'passed' | 'failed';
  marginRequirement: 'passed' | 'failed';
}

interface EventMetadata {
  traceId: string;
  userId?: string;
  source: 'api' | 'dashboard' | 'agent';
  correlationId?: string;
}
```

### Sample JSON

```json
{
  "eventId": "evt-550e8400-e29b-41d4-a716-446655440000",
  "eventType": "order.created",
  "timestamp": "2025-10-24T10:30:00.123Z",
  "version": "v1",
  "payload": {
    "orderId": "ORD-20251024-001",
    "symbol": "PETR4",
    "side": "BUY",
    "type": "LIMIT",
    "quantity": 100,
    "price": 32.5,
    "timeInForce": "DAY",
    "status": "PENDING",
    "createdAt": "2025-10-24T10:30:00Z",
    "riskChecks": {
      "tradingHours": "passed",
      "killSwitch": "passed",
      "dailyLossLimit": "passed",
      "positionSizeLimit": "passed",
      "marginRequirement": "passed"
    }
  },
  "metadata": {
    "traceId": "trace-abc123",
    "userId": "user-001",
    "source": "dashboard",
    "correlationId": "corr-xyz789"
  }
}
```

## Semantics

### When Emitted

The event is emitted when:

1. Client sends `POST /api/orders` request
2. Request passes input validation (required fields, types, formats)
3. Order passes all risk checks (trading hours, kill switch, daily loss, position size, margin)
4. Order persisted to database with status `PENDING`
5. Event published to event bus (Kafka, RabbitMQ, or in-memory queue)

**Timing**: Event emitted synchronously before API response (ensures event published before client receives confirmation)

**Idempotency**: If order created with `idempotencyKey`, duplicate requests return existing order without emitting duplicate events (24-hour deduplication window)

### Downstream Consumers

**Dashboard** (port 3103)

- Listens for `order.created` events via WebSocket (planned)
- Updates order list in real-time
- Displays notification: "Order ORD-20251024-001 created"

**Audit Service** (planned)

- Persists all events to audit log database
- Enables compliance reporting and debugging
- Retention: 1 year

**Analytics Pipeline** (planned)

- Aggregates order creation metrics
- Tracks order volume by symbol, side, type
- Feeds Grafana dashboards

**Monitoring**

- Increment counter `order_manager_orders_total{side="BUY",status="PENDING"}`
- Record latency `order_manager_execution_latency_seconds`

### Event Ordering

Events for the same order are emitted in sequence:

1. `order.created` (status: PENDING)
2. `order.submitted` (status: SUBMITTED)
3. `order.filled` or `order.canceled` or `order.rejected` (terminal state)

**Guarantee**: Events for a single order are ordered by timestamp (monotonically increasing)  
**No Guarantee**: Events for different orders may arrive out of order (eventual consistency)

### Error Handling

**Event Publication Failure**

- If event bus unavailable: Log error, continue with order creation (event lost)
- Future: Implement outbox pattern for guaranteed delivery

**Consumer Failure**

- Consumers must handle duplicate events (idempotent processing)
- Consumers must handle out-of-order events (use timestamp for ordering)
- Consumers should implement dead-letter queue for failed processing

## Related Documentation

- [Order Schema](../../domain/schemas/v1/order)
- [Risk Rule Schema](../../domain/schemas/v1/risk-rule)
- [Place Order Flow](../../flows/v1/place-order)
- [Order Manager API](../../../api/order-manager)
- [Event Catalogue](/sdd/events/v1)
