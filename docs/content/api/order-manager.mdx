---
title: Order Manager API
sidebar_position: 11
description: Summary of the Order Manager API and links to autogenerated documentation.
tags:
  - api
  - order-manager
owner: BackendGuild
lastReviewed: '2025-10-26'
---
## Overview

- **Service Name**: Order Manager API
- **Technology**: .NET 8 / C#
- **Port**: 3205
- **Base URL**: `http://localhost:3205/api`
- **Status**: MVP (planned implementation)
- **Purpose**: Execute trading orders and manage risk controls

**Scope**:

- Order lifecycle management (create, update, cancel, query)
- Risk validation (daily limits, position size, trading hours)
- Kill switch functionality (emergency stop)
- Order execution via ProfitDLL integration
- Position state tracking

**Authentication Model**:

- Current: No authentication (internal service)
- Planned: Token-based authentication (Authorization header)

**Rate Limits**:

- Not yet implemented
- Planned: 300 requests per 60s window

**Response Format**: JSON envelope for all responses:

```json
{
  "success": true,
  "data": {},
  "message": "optional",
  "error": "optional"
}
```

**Redoc Documentation**:

- ⚠️ **TODO**: OpenAPI spec not yet published
- Planned location: `/apis/order-manager/v1/openapi.yaml`
- Redoc URL: `/redoc/order-manager` (once automated build exists)
- Source code: `backend/services/order-manager/` (planned)

**Related Documentation**:

- SDD specification: `/sdd/api/order-manager/v1/spec`
- API guidelines: `/sdd/api/order-manager/v1/guidelines`
- Architecture: `../../reference/architecture/technical-specification` (external file - migration pending)
- Service map: `../../reference/architecture/service-map` (when migrated from `docs/context/backend/architecture/service-map.md`)

## Resources

### Critical Endpoints

**Order Management**:

- `POST /api/orders` — Create new order (market/limit/stop)
- `GET /api/orders` — List orders with filters (status, symbol, date range)
- `GET /api/orders/{id}` — Get order details
- Planned (v1.1): `PUT /api/orders/{id}` — Order modification (deferred; cancel + recreate for v1)
- `DELETE /api/orders/{id}` — Cancel order

**Risk Controls**:

- `GET /api/risk/limits` — Get current risk limits (daily loss, position size)
- `PUT /api/risk/limits` — Update risk parameters
- `POST /api/risk/kill-switch` — Activate emergency stop (cancel all orders)
- `GET /api/risk/positions` — Get current positions by symbol

**Health & Observability**:

- `GET /health` — Service health check (includes ProfitDLL connection status)
- `GET /metrics` — Prometheus metrics (order rate, execution latency, risk violations)

### Best Practices

**Error Handling**:

- Use standard HTTP status codes: 200, 201, 400, 404, 500
- For validation issues return `success: false` with `error` string and `errors[]`
- Log stack traces for 500 errors server-side

**Idempotency**:

- Order creation: Support `idempotencyKey` to prevent duplicates
- Order cancellation: Idempotent (canceling already canceled order returns success)
- Risk limit updates: Last-write-wins with optimistic locking

**Validation**:

- Reject orders outside trading hours (09:00-18:00 BRT)
- Validate symbol exists in market data
- Check position size against risk limits before execution
- Verify sufficient margin or balance

**Integration Notes**:

- Executes via ProfitDLL (Windows-native DLL)
- Publishes order events to event bus (planned Kafka integration)
- Consumed by Dashboard (port 3103) and API Gateway (port 8000)

**Performance SLA**:

- Order placement latency: &lt;500 ms p95
- Risk check latency: &lt;100 ms p95
- Health check response: &lt;50 ms

**Validation with ArchitectureGuild**:

- ✅ Endpoint naming conventions reviewed
- ✅ Risk control parameters validated
- ✅ ProfitDLL integration approach confirmed
- ✅ Error response schemas approved
