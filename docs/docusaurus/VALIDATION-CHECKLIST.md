# Docusaurus File Integrity Validation Checklist

**Purpose**: Pre-backup validation to ensure all critical files are present and valid  
**Date**: 2025-10-19 14:30:00 UTC  
**Validation Script**: `scripts/docs/validate-docusaurus-integrity.sh`

---

## Section 1: Critical Configuration Files

Validate each critical configuration file for presence, size, and integrity.

### Configuration Files Checklist

| # | File | Expected | Size | Modified | MD5 | Status |
|---|------|----------|------|----------|-----|--------|
| 1 | package.json | ✅ Yes | TBD | TBD | TBD | ⏳ Pending |
| 2 | docusaurus.config.ts | ✅ Yes | TBD | TBD | TBD | ⏳ Pending |
| 3 | sidebars.ts | ✅ Yes | TBD | TBD | TBD | ⏳ Pending |
| 4 | tsconfig.json | ✅ Yes | TBD | TBD | TBD | ⏳ Pending |
| 5 | .gitignore | ✅ Yes | TBD | TBD | TBD | ⏳ Pending |
| 6 | .prettierrc | ✅ Yes | TBD | TBD | TBD | ⏳ Pending |
| 7 | .eslintrc.js | ⚠️ Optional | TBD | TBD | TBD | ⏳ Pending |
| 8 | README.md | ✅ Yes | TBD | TBD | TBD | ⏳ Pending |
| 9 | TROUBLESHOOTING.md | ✅ Yes | TBD | TBD | TBD | ⏳ Pending |
| 10 | QUICK-START.md | ✅ Yes | TBD | TBD | TBD | ⏳ Pending |

### Critical Content Validation

**package.json** - Must contain:
- [ ] @docusaurus/core: 3.9.1
- [ ] @docusaurus/preset-classic: 3.9.1
- [ ] @docusaurus/theme-mermaid: ^3.9.1
- [ ] @akebifiky/remark-simple-plantuml: ^1.0.2
- [ ] react: 18.2.0 (exact version)
- [ ] react-dom: 18.2.0 (exact version)
- [ ] lucide-react: ^0.263.1
- [ ] gray-matter: ^4.0.3
- [ ] dotenv: ^16.4.5
- [ ] Valid JSON syntax

**docusaurus.config.ts** - Must have:
- [ ] Root .env loading (lines 8-10)
- [ ] Mermaid support: `markdown.mermaid = true`
- [ ] PlantUML plugin: remarkSimplePlantuml
- [ ] i18n config: defaultLocale = 'pt'
- [ ] Custom fields: searchApiUrl, healthApiUrl, grafanaUrl
- [ ] Navbar items: 7+ items
- [ ] Docs path: '../context'

**sidebars.ts** - Must have:
- [ ] Autogenerated sidebar config
- [ ] tutorialSidebar defined
- [ ] Valid TypeScript syntax

---

## Section 2: Source Code Validation

### Directory Structure Checklist

| # | Directory | Expected | Files | Status |
|---|-----------|----------|-------|--------|
| 1 | src/components/ | ✅ Yes | 10+ | ⏳ Pending |
| 2 | src/theme/ | ✅ Yes | 2+ | ⏳ Pending |
| 3 | src/pages/ | ✅ Yes | 4+ | ⏳ Pending |
| 4 | src/css/ | ✅ Yes | 1+ | ⏳ Pending |

### Custom Components Validation

**src/components/** - Must contain:

| # | Component | index.tsx | styles.module.css | Status |
|---|-----------|-----------|-------------------|--------|
| 1 | ApiEndpoint/ | ✅ Required | ✅ Required | ⏳ Pending |
| 2 | CodeBlock/ | ✅ Required | ❌ Optional | ⏳ Pending |
| 3 | CookiesBanner.tsx | ✅ Required | N/A | ⏳ Pending |
| 4 | CopyButton.tsx | ✅ Required | N/A | ⏳ Pending |
| 5 | FacetFilters/ | ✅ Required | ✅ Required | ⏳ Pending |
| 6 | HealthMetricsCard/ | ✅ Required | ✅ Required | ⏳ Pending |
| 7 | HomepageFeatures/ | ✅ Required | ✅ Required | ⏳ Pending |
| 8 | SearchBar/ | ✅ Required | ✅ Required | ⏳ Pending |
| 9 | Tabs/ | ✅ Required | ❌ Optional | ⏳ Pending |

**Total Expected**: 9 components

### Theme Overrides Validation

**src/theme/** - Must contain:

| # | Override | Files | Status |
|---|----------|-------|--------|
| 1 | Layout/ | index.tsx | ⏳ Pending |
| 2 | SearchBar/ | index.tsx, styles.module.css | ⏳ Pending |

**Total Expected**: 2 theme overrides

### Custom Pages Validation

**src/pages/** - Must contain:

| # | Page | Files | Status |
|---|------|-------|--------|
| 1 | Homepage | index.tsx, index.module.css | ⏳ Pending |
| 2 | Health Dashboard | health/index.tsx, health/styles.module.css | ⏳ Pending |
| 3 | Advanced Search | search/index.tsx, search/styles.module.css | ⏳ Pending |
| 4 | OpenSpec Viewer | spec/index.tsx | ⏳ Pending |
| 5 | Example Markdown | markdown-page.md | ⏳ Pending |

**Total Expected**: 5 custom pages

### Custom CSS Validation

**src/css/** - Must contain:

| # | File | Purpose | Status |
|---|------|---------|--------|
| 1 | custom.css | Gemini CLI dark theme | ⏳ Pending |

---

## Section 3: Static Assets Validation

### Static Directory Structure

| # | Directory/File | Expected | Status |
|---|----------------|----------|--------|
| 1 | static/img/ | ✅ Yes | ⏳ Pending |
| 2 | static/.htaccess | ✅ Yes | ⏳ Pending |
| 3 | static/.nojekyll | ✅ Yes | ⏳ Pending |
| 4 | static/clear-cache.html | ⚠️ Optional | ⏳ Pending |

### Image Assets Validation

**static/img/** - Must contain:

| # | Asset | Purpose | Status |
|---|-------|---------|--------|
| 1 | logo.svg | Main logo (light mode) | ⏳ Pending |
| 2 | logo-dark.svg | Dark mode logo | ⏳ Pending |
| 3 | favicon.svg | Favicon SVG | ⏳ Pending |
| 4 | favicon.ico | Favicon ICO fallback | ⏳ Pending |
| 5 | docusaurus-social-card.jpg | Social media card | ⏳ Pending |
| 6 | undraw_*.svg | Illustration assets | ⏳ Pending |

**Expected Total Images**: 6+ (including undraw illustrations)

---

## Section 4: Scripts Validation

### Scripts Directory

**scripts/** - Must contain:

| # | Script | Type | Executable | Status |
|---|--------|------|-----------|--------|
| 1 | sync-spec.js | Node.js | ✅ Yes | ⏳ Pending |
| 2 | preview-theme.sh | Bash | ✅ Yes | ⏳ Pending |

### Script Content Validation

**sync-spec.js** - Must have:
- [ ] Valid Node.js syntax
- [ ] cpSync, mkdirSync, rmSync imports
- [ ] Source: docs/spec/
- [ ] Destination: static/spec/

**preview-theme.sh** - Must have:
- [ ] Bash shebang (#!/bin/bash)
- [ ] Execute permission (chmod +x)

---

## Section 5: Dependencies Validation

### Runtime Dependencies (from package.json)

| # | Package | Expected Version | Actual | Status |
|---|---------|------------------|--------|--------|
| 1 | @docusaurus/core | 3.9.1 | TBD | ⏳ Pending |
| 2 | @docusaurus/preset-classic | 3.9.1 | TBD | ⏳ Pending |
| 3 | @docusaurus/theme-mermaid | ^3.9.1 | TBD | ⏳ Pending |
| 4 | @akebifiky/remark-simple-plantuml | ^1.0.2 | TBD | ⏳ Pending |
| 5 | react | 18.2.0 (exact) | TBD | ⏳ Pending |
| 6 | react-dom | 18.2.0 (exact) | TBD | ⏳ Pending |
| 7 | @mdx-js/react | ^3.0.0 | TBD | ⏳ Pending |
| 8 | lucide-react | ^0.263.1 | TBD | ⏳ Pending |
| 9 | gray-matter | ^4.0.3 | TBD | ⏳ Pending |
| 10 | dotenv | ^16.4.5 | TBD | ⏳ Pending |
| 11 | clsx | ^2.0.0 | TBD | ⏳ Pending |
| 12 | prism-react-renderer | ^2.3.0 | TBD | ⏳ Pending |

**Expected Total**: 12 runtime dependencies

### Dev Dependencies (from package.json)

| # | Package | Expected Version | Actual | Status |
|---|---------|------------------|--------|--------|
| 1 | typescript | ~5.6.2 | TBD | ⏳ Pending |
| 2 | @docusaurus/types | 3.9.1 | TBD | ⏳ Pending |
| 3 | @docusaurus/module-type-aliases | 3.9.1 | TBD | ⏳ Pending |
| 4 | @docusaurus/tsconfig | 3.9.1 | TBD | ⏳ Pending |

**Expected Total**: 4 dev dependencies

---

## Section 6: Build Artifacts Check

**Note**: These will be EXCLUDED from backup

| # | Artifact | Status | Size | Note |
|---|----------|--------|------|------|
| 1 | node_modules/ | TBD | TBD | ❌ Exclude |
| 2 | .docusaurus/ | TBD | TBD | ❌ Exclude |
| 3 | build/ | TBD | TBD | ❌ Exclude |
| 4 | package-lock.json | TBD | TBD | ❌ Exclude |
| 5 | *.log | TBD | TBD | ❌ Exclude |

**Total Artifacts Size**: TBD (will be calculated)

**Expected Behavior**:
- If artifacts exist: Note size, will be excluded from backup
- If artifacts don't exist: No action required

---

## Section 7: Configuration Validation

### docusaurus.config.ts Settings

| # | Setting | Expected Value | Actual | Status |
|---|---------|----------------|--------|--------|
| 1 | Root .env loading | Lines 8-10 present | TBD | ⏳ Pending |
| 2 | Mermaid support | markdown.mermaid = true | TBD | ⏳ Pending |
| 3 | PlantUML plugin | remarkPlugins includes remarkSimplePlantuml | TBD | ⏳ Pending |
| 4 | i18n defaultLocale | 'pt' | TBD | ⏳ Pending |
| 5 | i18n locales | ['pt', 'en'] | TBD | ⏳ Pending |
| 6 | Custom field: searchApiUrl | Defined | TBD | ⏳ Pending |
| 7 | Custom field: healthApiUrl | Defined | TBD | ⏳ Pending |
| 8 | Custom field: grafanaUrl | Defined | TBD | ⏳ Pending |
| 9 | Navbar items | 7+ items | TBD | ⏳ Pending |
| 10 | Docs path | '../context' | TBD | ⏳ Pending |

### Environment Variable References

| # | Variable | Reference in Config | Default | Status |
|---|----------|---------------------|---------|--------|
| 1 | DOCS_SITE_URL | url field | http://localhost | ⏳ Pending |
| 2 | DOCS_BASE_URL | baseUrl field | / | ⏳ Pending |
| 3 | SEARCH_API_URL | customFields.searchApiUrl | http://localhost:3400/api/v1/docs | ⏳ Pending |
| 4 | HEALTH_API_URL | customFields.healthApiUrl | http://localhost:3400/api/v1/docs/health | ⏳ Pending |
| 5 | GRAFANA_URL | customFields.grafanaUrl | http://localhost:3000/d/docs-health | ⏳ Pending |
| 6 | PLANTUML_BASE_URL | remarkPlugins config | https://www.plantuml.com/plantuml/svg | ⏳ Pending |

---

## Section 8: Integration Validation

### Integration Configurations

| # | Integration | Configuration | Expected | Status |
|---|-------------|---------------|----------|--------|
| 1 | Documentation API | searchApiUrl custom field | Defined | ⏳ Pending |
| 2 | Health API | healthApiUrl custom field | Defined | ⏳ Pending |
| 3 | Grafana | grafanaUrl custom field | Defined | ⏳ Pending |
| 4 | PlantUML Server | remarkPlugins baseUrl | Configurable | ⏳ Pending |
| 5 | Context Docs | docs.path | '../context' | ⏳ Pending |
| 6 | OpenSpec Sync | sync-spec.js script | Functional | ⏳ Pending |

---

## Section 9: Documentation Validation

### Documentation Files Completeness

| # | File | Expected | Sections | Status |
|---|------|----------|----------|--------|
| 1 | README.md | ✅ Yes | 700+ lines, search, health dashboard | ⏳ Pending |
| 2 | TROUBLESHOOTING.md | ✅ Yes | Theme troubleshooting | ⏳ Pending |
| 3 | QUICK-START.md | ✅ Yes | Quick start commands | ⏳ Pending |
| 4 | THEME-GEMINI-CLI.md | ✅ Yes | Theme implementation | ⏳ Pending |
| 5 | THEME-CHANGES-SUMMARY.md | ⚠️ Optional | Theme changes log | ⏳ Pending |
| 6 | THEME-MIGRATION.md | ⚠️ Optional | Migration guide | ⏳ Pending |
| 7 | STATUS-FINAL.md | ⚠️ Optional | Status report | ⏳ Pending |
| 8 | GEMINI-CLI-EXACT-MATCH.md | ⚠️ Optional | Theme matching | ⏳ Pending |

---

## Section 10: Final Validation Summary

### Summary Statistics

**To be calculated during validation**:

| Metric | Expected | Actual | Status |
|--------|----------|--------|--------|
| Total files validated | 50+ | TBD | ⏳ Pending |
| Files passed | All critical | TBD | ⏳ Pending |
| Files failed | 0 | TBD | ⏳ Pending |
| Warnings | 0 | TBD | ⏳ Pending |
| Total source size (MB) | 5-10 | TBD | ⏳ Pending |
| Ready for backup | Yes | TBD | ⏳ Pending |

### Critical Validation Results

**Must Pass**:
- [ ] All critical configuration files present
- [ ] All required dependencies declared
- [ ] Root .env loading configured
- [ ] All custom components present
- [ ] All theme overrides present
- [ ] All static assets present
- [ ] All scripts present and executable

**Optional**:
- [ ] Documentation files complete
- [ ] Build artifacts absent (or noted for exclusion)

### Validation Decision

**If ALL critical validations pass**:
- ✅ PROCEED to backup creation
- Execute: `bash scripts/docs/backup-docusaurus.sh`

**If ANY critical validation fails**:
- ❌ DO NOT PROCEED to backup
- Review failed checks in validation report
- Fix issues before attempting backup
- Re-run validation after fixes

---

## Section 11: Validation Execution Log

### Execution Information

**Validation Script**: `scripts/docs/validate-docusaurus-integrity.sh`  
**Execution Time**: TBD  
**Exit Code**: TBD  
**Report Location**: TBD

### Validation Steps

1. ⏳ Pending - Change to Docusaurus directory
2. ⏳ Pending - Validate package.json
3. ⏳ Pending - Validate docusaurus.config.ts
4. ⏳ Pending - Validate sidebars.ts
5. ⏳ Pending - Validate custom components
6. ⏳ Pending - Validate theme overrides
7. ⏳ Pending - Validate custom pages
8. ⏳ Pending - Validate static assets
9. ⏳ Pending - Validate scripts
10. ⏳ Pending - Check build artifacts
11. ⏳ Pending - Generate validation report
12. ⏳ Pending - Print summary

---

## Section 12: Troubleshooting Failed Validation

### Common Validation Issues

**Issue: package.json missing or corrupted**
- **Symptom**: jq fails to parse JSON
- **Fix**: Review package.json for syntax errors
- **Restore**: From git history or backup

**Issue: Missing dependencies**
- **Symptom**: Required packages not in package.json
- **Fix**: Add missing packages manually
- **Reference**: RESTORATION-REPORT.md Section 2

**Issue: Configuration errors**
- **Symptom**: docusaurus.config.ts validation fails
- **Fix**: Review config for syntax errors
- **Reference**: RESTORATION-REPORT.md Section 5

**Issue: Missing components**
- **Symptom**: Component directories not found
- **Fix**: Restore missing components from backup
- **Reference**: RESTORATION-REPORT.md Section 3

**Issue: Build artifacts present**
- **Symptom**: node_modules, .docusaurus, build directories found
- **Fix**: These will be excluded from backup (not an error)
- **Action**: Note size for documentation

---

## Section 13: Next Steps After Validation

### If Validation Passes

1. Review validation report: `cat docs/docusaurus/VALIDATION-REPORT-{timestamp}.md`
2. Proceed to backup: `bash scripts/docs/backup-docusaurus.sh`
3. Verify backup: Review BACKUP-VERIFICATION.md checklist
4. Keep validation report for reference

### If Validation Fails

1. Review validation report for specific failures
2. Fix critical issues identified
3. Re-run validation: `bash scripts/docs/validate-docusaurus-integrity.sh`
4. Repeat until all validations pass
5. Document fixes for future reference

---

**Checklist Generated**: 2025-10-19 14:30:00 UTC  
**Next Action**: Execute validation script  
**Command**: `bash scripts/docs/validate-docusaurus-integrity.sh --verbose`  
**Expected Duration**: < 1 minute
