---
title: Docusaurus Cleanup Checklist - Phase 2
sidebar_position: 1
tags: [documentation]
domain: shared
type: reference
summary: Docusaurus Cleanup Checklist - Phase 2
status: active
last_review: 2025-10-22
---

# Docusaurus Cleanup Checklist - Phase 2

**Purpose:** Safe removal of build artifacts while preserving source code
**Phase:** 2 of 4 (Cleanup)
**Date:** $(date)
**Status:** ⏳ In Progress

## Pre-Cleanup Preparation

Before starting cleanup:

- [ ] Phase 1 backup completed and verified
- [ ] Backup location documented: `.backup-docusaurus-{timestamp}/`
- [ ] All Docusaurus processes stopped: `pkill -f docusaurus`
- [ ] No active npm processes: `ps aux | grep npm`
- [ ] Current directory: `/home/marce/projetos/TradingSystem/docs/docusaurus`
- [ ] Sufficient disk space available: `df -h`

## Pre-Cleanup State Documentation

Document current state before cleanup:

- [ ] Check node_modules/ exists: `test -d node_modules && echo "EXISTS" || echo "NOT PRESENT"`
- [ ] Check .docusaurus/ exists: `test -d .docusaurus && echo "EXISTS" || echo "NOT PRESENT"`
- [ ] Check build/ exists: `test -d build && echo "EXISTS" || echo "NOT PRESENT"`
- [ ] Check package-lock.json exists: `test -f package-lock.json && echo "EXISTS" || echo "NOT PRESENT"`
- [ ] Check .cache-loader/ exists: `test -d .cache-loader && echo "EXISTS" || echo "NOT PRESENT"`
- [ ] Check static/spec/ exists: `test -d static/spec && echo "EXISTS" || echo "NOT PRESENT"`

Calculate sizes (if exist):

- [ ] node_modules/ size: `du -sh node_modules 2>/dev/null || echo "N/A"`
- [ ] .docusaurus/ size: `du -sh .docusaurus 2>/dev/null || echo "N/A"`
- [ ] build/ size: `du -sh build 2>/dev/null || echo "N/A"`
- [ ] package-lock.json size: `ls -lh package-lock.json 2>/dev/null | awk '{print $5}' || echo "N/A"`

## Source Code Verification (Must Preserve)

Verify all source files are present BEFORE cleanup:

- [ ] src/ directory exists: `test -d src && echo "✅" || echo "❌"`
- [ ] src/ file count: `find src -type f | wc -l` (expected: 24)
- [ ] static/ directory exists: `test -d static && echo "✅" || echo "❌"`
- [ ] static/ file count (excluding spec/): `find static -type f -not -path 'static/spec/*' | wc -l`
- [ ] scripts/ directory exists: `test -d scripts && echo "✅" || echo "❌"`
- [ ] scripts/ file count: `find scripts -type f | wc -l` (expected: 2)
- [ ] package.json exists: `test -f package.json && echo "✅" || echo "❌"`
- [ ] docusaurus.config.ts exists: `test -f docusaurus.config.ts && echo "✅" || echo "❌"`
- [ ] sidebars.ts exists: `test -f sidebars.ts && echo "✅" || echo "❌"`
- [ ] tsconfig.json exists: `test -f tsconfig.json && echo "✅" || echo "❌"`
- [ ] README.md exists: `test -f README.md && echo "✅" || echo "❌"`

Create source manifest:

- [ ] Generate checksums: `find src static scripts -type f -not -path 'static/spec/*' -exec md5sum {} \; > .source-manifest-pre.txt`
- [ ] Manifest created: `test -f .source-manifest-pre.txt && echo "✅" || echo "❌"`

## Artifact Removal (Safe Deletion)

Remove build artifacts in order:

### 4.1 Remove node_modules/

- [ ] Check if exists: `test -d node_modules`
- [ ] If exists, calculate size: `du -sh node_modules`
- [ ] Remove: `rm -rf node_modules/`
- [ ] Verify removed: `test ! -d node_modules && echo "✅ Removed" || echo "❌ Still exists"`

### 4.2 Remove .docusaurus/

- [ ] Check if exists: `test -d .docusaurus`
- [ ] If exists, calculate size: `du -sh .docusaurus`
- [ ] Remove: `rm -rf .docusaurus/`
- [ ] Verify removed: `test ! -d .docusaurus && echo "✅ Removed" || echo "❌ Still exists"`

### 4.3 Remove build/

- [ ] Check if exists: `test -d build`
- [ ] If exists, calculate size: `du -sh build`
- [ ] Remove: `rm -rf build/`
- [ ] Verify removed: `test ! -d build && echo "✅ Removed" || echo "❌ Still exists"`

### 4.4 Remove package-lock.json

- [ ] Check if exists: `test -f package-lock.json`
- [ ] If exists, calculate size: `ls -lh package-lock.json | awk '{print $5}'`
- [ ] Remove: `rm -f package-lock.json`
- [ ] Verify removed: `test ! -f package-lock.json && echo "✅ Removed" || echo "❌ Still exists"`

### 4.5 Remove .cache-loader/

- [ ] Check if exists: `test -d .cache-loader`
- [ ] If exists, calculate size: `du -sh .cache-loader`
- [ ] Remove: `rm -rf .cache-loader/`
- [ ] Verify removed: `test ! -d .cache-loader && echo "✅ Removed" || echo "❌ Still exists"`

### 4.6 Remove static/spec/ (generated content)

- [ ] Check if exists: `test -d static/spec`
- [ ] If exists, calculate size: `du -sh static/spec`
- [ ] Remove: `rm -rf static/spec/`
- [ ] Verify removed: `test ! -d static/spec && echo "✅ Removed" || echo "❌ Still exists"`
- [ ] Note: Will be regenerated by `npm run prestart` in Phase 3

## Run npm clear

Execute Docusaurus cache clearing:

- [ ] Verify npm available: `command -v npm`
- [ ] Verify clear script exists: `grep -q '"clear"' package.json && echo "✅" || echo "❌"`
- [ ] Run npm clear: `npm run clear`
- [ ] Check exit code: `echo $?` (should be 0)
- [ ] Verify output: Should show "Docusaurus cache cleared"

## Post-Cleanup Validation

### 6.1 Verify Artifacts Removed

- [ ] node_modules/ removed: `test ! -d node_modules && echo "✅" || echo "❌ FAILED"`
- [ ] .docusaurus/ removed: `test ! -d .docusaurus && echo "✅" || echo "❌ FAILED"`
- [ ] build/ removed: `test ! -d build && echo "✅" || echo "❌ FAILED"`
- [ ] package-lock.json removed: `test ! -f package-lock.json && echo "✅" || echo "❌ FAILED"`
- [ ] .cache-loader/ removed: `test ! -d .cache-loader && echo "✅" || echo "❌ FAILED"`
- [ ] static/spec/ removed: `test ! -d static/spec && echo "✅" || echo "❌ FAILED"`

### 6.2 Verify Source Code Preserved

- [ ] src/ directory intact: `test -d src && echo "✅" || echo "❌ CRITICAL ERROR"`
- [ ] src/ file count matches: `find src -type f | wc -l` (should be 24)
- [ ] static/ directory intact: `test -d static && echo "✅" || echo "❌ CRITICAL ERROR"`
- [ ] scripts/ directory intact: `test -d scripts && echo "✅" || echo "❌ CRITICAL ERROR"`
- [ ] scripts/ file count matches: `find scripts -type f | wc -l` (should be 2)
- [ ] package.json intact: `test -f package.json && echo "✅" || echo "❌ CRITICAL ERROR"`
- [ ] docusaurus.config.ts intact: `test -f docusaurus.config.ts && echo "✅" || echo "❌ CRITICAL ERROR"`
- [ ] sidebars.ts intact: `test -f sidebars.ts && echo "✅" || echo "❌ CRITICAL ERROR"`
- [ ] tsconfig.json intact: `test -f tsconfig.json && echo "✅" || echo "❌ CRITICAL ERROR"`

### 6.3 Verify Source Checksums

- [ ] Generate post-cleanup manifest: `find src static scripts -type f -not -path 'static/spec/*' -exec md5sum {} \; > .source-manifest-post.txt`
- [ ] Compare manifests: `diff .source-manifest-pre.txt .source-manifest-post.txt`
- [ ] Checksums match: `diff .source-manifest-pre.txt .source-manifest-post.txt && echo "✅ All files preserved" || echo "❌ Files modified!"`

## Cleanup Summary

Generate cleanup summary:

- [ ] Total artifacts removed: Count from Section 4
- [ ] Total space freed: Sum of sizes from Section 4
- [ ] Source files preserved: Count from Section 6.2
- [ ] Validation status: All checks passed ✅ / Some failed ❌
- [ ] Cleanup duration: End time - Start time

## Documentation

Document cleanup results:

- [ ] Cleanup log created: `CLEANUP-LOG-{timestamp}.md`
- [ ] Cleanup report generated: `CLEANUP-REPORT-{timestamp}.json`
- [ ] Results documented in log file
- [ ] Next steps documented

## Rollback Preparation (If Needed)

If cleanup fails or source files are damaged:

- [ ] Stop immediately - DO NOT proceed to Phase 3
- [ ] Review cleanup log for errors
- [ ] Restore from Phase 1 backup:
  ```bash
  cd /home/marce/projetos/TradingSystem
  rm -rf docs/docusaurus
  rsync -av .backup-docusaurus-{timestamp}/docusaurus/ docs/docusaurus/
  ```
- [ ] Verify restoration: Compare file counts and checksums
- [ ] Investigate root cause before retrying cleanup

## Ready for Phase 3 Checklist

Verify ready to proceed to Phase 3 (npm install):

- [ ] All artifacts successfully removed
- [ ] All source files preserved and verified
- [ ] Checksums match pre-cleanup state
- [ ] No errors in cleanup log
- [ ] Cleanup summary generated
- [ ] Phase 1 backup still available (for safety)
- [ ] Disk space sufficient for npm install (check: `df -h`)

## Sign-off

If all validations pass:

- [ ] Cleanup completed successfully ✅
- [ ] All artifacts removed ✅
- [ ] All source code preserved ✅
- [ ] Ready to proceed to Phase 3: npm install ✅

Cleaned by: [Name]
Date: [Timestamp]
Cleanup log: CLEANUP-LOG-{timestamp}.md

## Next Steps

After successful cleanup:

1. [ ] Review cleanup log: `cat CLEANUP-LOG-{timestamp}.md`
2. [ ] Verify disk space: `df -h`
3. [ ] Proceed to Phase 3: Run `npm install` (see Phase 3 plan)
4. [ ] Keep Phase 1 backup until Phase 4 validation complete
5. [ ] Document cleanup completion in project documentation

**Important Notes:**

- ⚠️ If ANY source file validation fails, STOP and restore from backup
- ⚠️ Do NOT proceed to Phase 3 if checksums don't match
- ⚠️ Keep Phase 1 backup until entire restoration is verified
- ✅ Clean up temporary manifest files after successful validation: `rm -f .source-manifest-*.txt`
