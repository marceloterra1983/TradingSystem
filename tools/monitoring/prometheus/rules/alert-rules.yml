groups:
  - name: service-health
    rules:
      - alert: IdeaBankApiDown
        expr: up{job="idea-bank-api"} == 0
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: Idea Bank API is down
          description: 'Prometheus target idea-bank-api has not responded for 2 minutes.'

      - alert: DocsApiErrors
        expr: rate(tradingsystem_http_requests_total{service="docs-api", status_code=~"5.."}[5m]) > 0.5
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: High 5xx error rate in Documentation API
          description: 'High number of 5xx responses observed over the last 5 minutes for docs-api.'

  - name: infrastructure
    rules:
      - alert: NodeExporterDown
        expr: up{job="node-exporter"} == 0
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: Node exporter is unreachable
          description: 'node-exporter target has been down for more than 5 minutes.'

