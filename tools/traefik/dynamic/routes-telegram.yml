http:
  routers:
    # ===========================================================================
    # Telegram Gateway API Routes
    # ===========================================================================
    # NOTE: Gateway API endpoints are at /api/messages and /api/channels
    # The /api/telegram-gateway/* endpoints are for MTProto direct access only
    # and should be accessed via port 14010 directly (not through Traefik)
    # ===========================================================================

    telegram-gateway-messages:
      rule: "PathPrefix(`/api/messages`)"
      entryPoints:
        - web
      service: telegram-gateway-api
      middlewares:
        - api-standard@file
      priority: 100

    telegram-gateway-channels:
      rule: "PathPrefix(`/api/channels`)"
      entryPoints:
        - web
      service: telegram-gateway-api
      middlewares:
        - api-standard@file
      priority: 100

    # Gateway API health endpoint (direct access only)
    telegram-gateway-health:
      rule: "Path(`/api/telegram/health`)"
      entryPoints:
        - web
      service: telegram-gateway-api
      middlewares:
        - api-standard@file
      priority: 100

    # Sync messages endpoint - POST only
    telegram-gateway-sync:
      rule: "Path(`/api/telegram-gateway/sync-messages`)"
      entryPoints:
        - web
      service: telegram-gateway-api
      middlewares:
        - api-standard@file
      priority: 100

  services:
    telegram-gateway-api:
      loadBalancer:
        servers:
          - url: "http://telegram-gateway-api:4010"
        healthCheck:
          path: "/health"
          interval: "30s"
          timeout: "5s"

